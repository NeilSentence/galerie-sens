{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\nilss\\\\Desktop\\\\Projects\\\\galerie-sens\\\\src\\\\components\\\\scene.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Matter from \"matter-js\";\n\nclass Scene extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    function makeWorld() {\n      // Should reappear\n      document.getElementsByTagName(\"sctn_home\")[0].style.visibility = \"visible\";\n      /** Set up relative positions and scales **/\n\n      var VIEW = {};\n      VIEW.width = window.innerWidth;\n      VIEW.height = window.innerHeight;\n      VIEW.centerX = VIEW.width / 2;\n      VIEW.centerY = VIEW.height / 2;\n      VIEW.offsetX = VIEW.width / 2;\n      VIEW.offsetY = VIEW.height / 2; // Matter.js module aliases\n\n      var Engine = Matter.Engine,\n          Render = Matter.Render,\n          Runner = Matter.Runner,\n          Common = Matter.Common,\n          World = Matter.World,\n          Bodies = Matter.Bodies,\n          Body = Matter.Body,\n          Events = Matter.Events,\n          Query = Matter.Query,\n          MouseConstraint = Matter.MouseConstraint,\n          Mouse = Matter.Mouse; // create engine\n\n      var engine = Engine.create(),\n          world = engine.world; // create renderer\n\n      var render = Render.create({\n        engine: engine,\n        element: document.getElementById(\"debug\"),\n        options: {\n          width: window.innerWidth,\n          height: window.innerHeight,\n          background: 'transparent',\n          // transparent to hide\n          wireframeBackground: 'transparent',\n          // transparent to hide\n          hasBounds: false,\n          enabled: true,\n          wireframes: false,\n          showSleeping: true,\n          showDebug: false,\n          showBroadphase: false,\n          showBounds: false,\n          showVelocity: false,\n          showCollisions: false,\n          showAxes: false,\n          showPositions: false,\n          showAngleIndicator: false,\n          showIds: false,\n          showShadows: false\n        }\n      }); // Disable to hide debug\n\n      Render.run(render); // create runner\n\n      var runner = Runner.create();\n      Runner.run(runner, engine);\n      var ceiling, wallLeft, wallRight, ground; // add walls\n\n      var wallopts = {\n        isStatic: true,\n        restitution: 0.2,\n        friction: 1\n      };\n      var groundopts = {\n        isStatic: true,\n        restitution: 0,\n        friction: 2\n      };\n      World.add(world, [// ground\n      ground = Bodies.rectangle(window.innerWidth / 2, window.innerHeight + 50, window.innerWidth + 200, 100, groundopts), // walls\n      ceiling = Bodies.rectangle(window.innerWidth / 2, -50, window.innerWidth + 200, 100, wallopts), // top\n      wallRight = Bodies.rectangle(window.innerWidth + 50, window.innerHeight / 2, 100, window.innerHeight, wallopts), // right\n      wallLeft = Bodies.rectangle(-50, window.innerHeight / 2, 100, window.innerHeight, wallopts) // left\n      ]);\n      var bodiesDom = document.querySelectorAll('.matter-body');\n      var bodies = [];\n      let frA, oY;\n\n      for (var i = 0, l = bodiesDom.length; i < l; i++) {\n        if (bodiesDom[i].classList.contains('hot')) {\n          frA = 0.1;\n          oY = -40;\n        } else {\n          frA = 0;\n          oY = 0;\n        }\n\n        if (bodiesDom[i].classList.contains('strip')) {\n          // Strip\n          var body = Bodies.rectangle(VIEW.centerX + Math.floor(Math.random() * VIEW.width / 2) - VIEW.width / 4, oY, VIEW.width * bodiesDom[i].offsetWidth / window.innerWidth, VIEW.height * bodiesDom[i].offsetHeight / window.innerHeight, {\n            restitution: 0.05,\n            friction: 2,\n            frictionAir: frA,\n            frictionStatic: 20,\n            density: 100,\n            chamfer: {\n              radius: 4\n            },\n            angle: Math.random() * 2.000 - 1.000\n          });\n        } else if (bodiesDom[i].classList.contains('page-nav')) {\n          // Nav\n          var body = Bodies.circle(VIEW.centerX + Math.floor(Math.random() * VIEW.width / 2) - VIEW.width / 4, 0, 24, {\n            restitution: 0.3,\n            friction: 2,\n            frictionAir: 0,\n            frictionStatic: 2,\n            density: 100,\n            angle: Math.random() * 2.000 - 1.000\n          });\n        }\n\n        bodiesDom[i].id = body.id;\n        bodies.push(body);\n      }\n\n      World.add(engine.world, bodies); // add gyro control\n\n      var updateGravity = function (event) {\n        var orientation = typeof window.orientation !== 'undefined' ? window.orientation : 0,\n            gravity = engine.world.gravity;\n\n        if (orientation === 0) {\n          gravity.x = Common.clamp(event.gamma, -90, 90) / 90;\n          gravity.y = Common.clamp(event.beta, -90, 90) / 90;\n        } else if (orientation === 180) {\n          gravity.x = Common.clamp(event.gamma, -90, 90) / 90;\n          gravity.y = Common.clamp(-event.beta, -90, 90) / 90;\n        } else if (orientation === 90) {\n          gravity.x = Common.clamp(event.beta, -90, 90) / 90;\n          gravity.y = Common.clamp(-event.gamma, -90, 90) / 90;\n        } else if (orientation === -90) {\n          gravity.x = Common.clamp(-event.beta, -90, 90) / 90;\n          gravity.y = Common.clamp(event.gamma, -90, 90) / 90;\n        }\n      };\n\n      window.addEventListener('deviceorientation', updateGravity); // Add mouse control\n\n      var mouse = Mouse.create(render.canvas),\n          mouseConstraint = MouseConstraint.create(engine, {\n        mouse: mouse,\n        constraint: {\n          stiffness: 1,\n          render: {\n            visible: false\n          }\n        }\n      });\n      World.add(engine.world, mouseConstraint); // keep the mouse in sync with rendering\n\n      render.mouse = mouse;\n      var mouseX, mouseY, mouseXO, mouseYO, mouseXN, mouseYN; // Hover\n\n      Events.on(mouseConstraint, \"mousemove\", function (e) {\n        mouseX = e.mouse.absolute.x;\n        mouseY = e.mouse.absolute.y;\n\n        if (Query.point(bodies, {\n          x: mouseX,\n          y: mouseY\n        }).length) {\n          // remove exitsing hovers\n          removeHovers(); // apply new hover\n\n          var underMouse = Query.point(bodies, {\n            x: mouseX,\n            y: mouseY\n          })[0].id;\n          document.getElementById(underMouse).className += \" hover\";\n          document.body.style.cursor = \"pointer\";\n        } else {\n          removeHovers();\n        }\n      });\n\n      function removeHovers() {\n        var hovered = document.getElementsByClassName(\"hover\");\n\n        for (var i = 0; i < hovered.length; i++) {\n          hovered[i].classList.remove(\"hover\");\n        }\n\n        document.body.style.cursor = \"auto\";\n      } // Press (1)\n\n\n      Events.on(mouseConstraint, \"mousedown\", function (e) {\n        mouseXO = e.mouse.absolute.x;\n        mouseYO = e.mouse.absolute.y;\n      }); // Press (2), part 1 and 2 checks is not end of drag\n\n      Events.on(mouseConstraint, \"mouseup\", function (e) {\n        mouseXN = e.mouse.absolute.x;\n        mouseYN = e.mouse.absolute.y;\n\n        if (mouseXO == mouseXN && mouseYO == mouseYN) {\n          if (Query.point(bodies, {\n            x: mouseXN,\n            y: mouseYN\n          }).length) {\n            var underMouse = Query.point(bodies, {\n              x: mouseXN,\n              y: mouseYN\n            })[0].id;\n          }\n\n          if (underMouse) {\n            // go to URL\n            window.location.href = document.getElementById(underMouse).getAttribute(\"data-url\");\n          }\n        }\n\n        removeHovers();\n      });\n      window.requestAnimationFrame(update);\n\n      function update() {\n        // strips\n        for (var i = 0, l = bodiesDom.length; i < l; i++) {\n          var bodyDom = bodiesDom[i];\n          var body = null;\n\n          for (var j = 0, k = bodies.length; j < k; j++) {\n            if (bodies[j].id == bodyDom.id) {\n              body = bodies[j];\n              break;\n            }\n          }\n\n          if (body === null) continue;\n          bodyDom.style.transform = \"translate( \" + (body.position.x - bodyDom.offsetWidth / 2) + \"px, \" + (body.position.y - bodyDom.offsetHeight / 2) + \"px )\";\n          bodyDom.style.transform += \"rotate( \" + body.angle + \"rad )\";\n        }\n\n        window.requestAnimationFrame(update);\n      }\n    }\n\n    makeWorld();\n\n    function debounce(func, wait, immediate) {\n      var timeout;\n      return function () {\n        var context = this,\n            args = arguments;\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n          timeout = null;\n          if (!immediate) func.apply(context, args);\n        }, wait);\n        if (immediate && !timeout) func.apply(context, args);\n      };\n    }\n\n    var refreshWorld = debounce(function () {\n      location.reload();\n    }, 500);\n    window.addEventListener('resize', refreshWorld);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: \"scene\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nexport default Scene;","map":{"version":3,"sources":["C:/Users/nilss/Desktop/Projects/galerie-sens/src/components/scene.js"],"names":["React","ReactDOM","Matter","Scene","Component","constructor","props","state","componentDidMount","makeWorld","document","getElementsByTagName","style","visibility","VIEW","width","window","innerWidth","height","innerHeight","centerX","centerY","offsetX","offsetY","Engine","Render","Runner","Common","World","Bodies","Body","Events","Query","MouseConstraint","Mouse","engine","create","world","render","element","getElementById","options","background","wireframeBackground","hasBounds","enabled","wireframes","showSleeping","showDebug","showBroadphase","showBounds","showVelocity","showCollisions","showAxes","showPositions","showAngleIndicator","showIds","showShadows","run","runner","ceiling","wallLeft","wallRight","ground","wallopts","isStatic","restitution","friction","groundopts","add","rectangle","bodiesDom","querySelectorAll","bodies","frA","oY","i","l","length","classList","contains","body","Math","floor","random","offsetWidth","offsetHeight","frictionAir","frictionStatic","density","chamfer","radius","angle","circle","id","push","updateGravity","event","orientation","gravity","x","clamp","gamma","y","beta","addEventListener","mouse","canvas","mouseConstraint","constraint","stiffness","visible","mouseX","mouseY","mouseXO","mouseYO","mouseXN","mouseYN","on","e","absolute","point","removeHovers","underMouse","className","cursor","hovered","getElementsByClassName","remove","location","href","getAttribute","requestAnimationFrame","update","bodyDom","j","k","transform","position","debounce","func","wait","immediate","timeout","context","args","arguments","clearTimeout","setTimeout","apply","refreshWorld","reload"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Matter from \"matter-js\";\r\n\r\n\r\nclass Scene extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  componentDidMount() {\r\n    \r\n    function makeWorld(){\r\n\r\n      // Should reappear\r\n      document.getElementsByTagName(\"sctn_home\")[0].style.visibility = \"visible\";\r\n\r\n      /** Set up relative positions and scales **/\r\n      var VIEW = {};\r\n      VIEW.width    = window.innerWidth;\r\n      VIEW.height   = window.innerHeight;\r\n      VIEW.centerX  = VIEW.width / 2;\r\n      VIEW.centerY  = VIEW.height / 2;\r\n      VIEW.offsetX  = VIEW.width / 2;\r\n      VIEW.offsetY  = VIEW.height / 2;\r\n\r\n      // Matter.js module aliases\r\n      var Engine    = Matter.Engine,\r\n          Render    = Matter.Render,\r\n          Runner    = Matter.Runner,\r\n          Common    = Matter.Common,\r\n          World     = Matter.World,\r\n          Bodies    = Matter.Bodies,\r\n          Body      = Matter.Body,\r\n          Events    = Matter.Events,\r\n          Query     = Matter.Query,\r\n          MouseConstraint = Matter.MouseConstraint,\r\n          Mouse     = Matter.Mouse;\r\n\r\n      // create engine\r\n      var engine    = Engine.create(),\r\n          world     = engine.world;\r\n\r\n      // create renderer\r\n      var render = Render.create({\r\n        engine: engine,\r\n        element: document.getElementById(\"debug\"),\r\n        options: {\r\n          width: window.innerWidth,\r\n          height: window.innerHeight,\r\n          background: 'transparent', // transparent to hide\r\n          wireframeBackground: 'transparent', // transparent to hide\r\n          hasBounds: false,\r\n          enabled: true,\r\n          wireframes: false,\r\n          showSleeping: true,\r\n          showDebug: false,\r\n          showBroadphase: false,\r\n          showBounds: false,\r\n          showVelocity: false,\r\n          showCollisions: false,\r\n          showAxes: false,\r\n          showPositions: false,\r\n          showAngleIndicator: false,\r\n          showIds: false,\r\n          showShadows: false\r\n        }\r\n      });\r\n\r\n      // Disable to hide debug\r\n      Render.run(render);\r\n\r\n      // create runner\r\n      var runner = Runner.create();\r\n      Runner.run(runner, engine);\r\n\r\n      var ceiling,\r\n          wallLeft,\r\n          wallRight,\r\n          ground;\r\n\r\n      // add walls\r\n      var wallopts = {\r\n          isStatic:     true,\r\n          restitution:  0.2,\r\n          friction:     1\r\n      };\r\n      var groundopts = {\r\n          isStatic:     true,\r\n          restitution:  0,\r\n          friction:     2\r\n      };\r\n      \r\n      World.add(world, [\r\n        // ground\r\n        ground    = Bodies.rectangle(window.innerWidth/2, window.innerHeight+50, window.innerWidth+200, 100, groundopts),\r\n        // walls\r\n        ceiling   = Bodies.rectangle(window.innerWidth/2, -50, window.innerWidth+200, 100, wallopts), // top\r\n        wallRight = Bodies.rectangle(window.innerWidth+50, window.innerHeight/2, 100, window.innerHeight, wallopts), // right\r\n        wallLeft  = Bodies.rectangle(-50, window.innerHeight/2, 100, window.innerHeight, wallopts) // left\r\n      ]);\r\n\r\n      var bodiesDom = document.querySelectorAll('.matter-body');\r\n      var bodies = [];\r\n      \r\n      let frA, oY\r\n      for (var i = 0, l = bodiesDom.length; i < l; i++) {\r\n        if (bodiesDom[i].classList.contains('hot')) {\r\n          frA = 0.1;\r\n          oY = -40;\r\n        } else {\r\n          frA = 0;\r\n          oY = 0;\r\n        }\r\n        if (bodiesDom[i].classList.contains('strip')) {\r\n          // Strip\r\n          var body = Bodies.rectangle(\r\n            VIEW.centerX + Math.floor(Math.random() * VIEW.width/2) - VIEW.width/4,\r\n            oY,\r\n            VIEW.width * bodiesDom[i].offsetWidth / window.innerWidth,\r\n            VIEW.height * bodiesDom[i].offsetHeight / window.innerHeight, {\r\n              restitution:      0.05,\r\n              friction:         2,\r\n              frictionAir:      frA,\r\n              frictionStatic:   20,\r\n              density:          100,\r\n              chamfer:          { radius: 4 },\r\n              angle:            (Math.random() * 2.000) - 1.000\r\n            }\r\n          );\r\n        } else if (bodiesDom[i].classList.contains('page-nav')) {\r\n          // Nav\r\n          var body = Bodies.circle(\r\n            VIEW.centerX + Math.floor(Math.random() * VIEW.width/2) - VIEW.width/4,\r\n            0,\r\n            24, {\r\n              restitution:      0.3,\r\n              friction:         2,\r\n              frictionAir:      0,\r\n              frictionStatic:   2,\r\n              density:          100,\r\n              angle:            (Math.random() * 2.000) - 1.000\r\n            }\r\n          );\r\n        }\r\n        bodiesDom[i].id = body.id;\r\n        bodies.push(body);\r\n      }\r\n\r\n      World.add(engine.world, bodies);\r\n\r\n      // add gyro control\r\n      var updateGravity = function(event) {\r\n          var orientation = typeof window.orientation !== 'undefined' ? window.orientation : 0,\r\n              gravity = engine.world.gravity;\r\n\r\n          if (orientation === 0) {\r\n              gravity.x = Common.clamp(event.gamma, -90, 90) / 90;\r\n              gravity.y = Common.clamp(event.beta, -90, 90) / 90;\r\n          } else if (orientation === 180) {\r\n              gravity.x = Common.clamp(event.gamma, -90, 90) / 90;\r\n              gravity.y = Common.clamp(-event.beta, -90, 90) / 90;\r\n          } else if (orientation === 90) {\r\n              gravity.x = Common.clamp(event.beta, -90, 90) / 90;\r\n              gravity.y = Common.clamp(-event.gamma, -90, 90) / 90;\r\n          } else if (orientation === -90) {\r\n              gravity.x = Common.clamp(-event.beta, -90, 90) / 90;\r\n              gravity.y = Common.clamp(event.gamma, -90, 90) / 90;\r\n          }\r\n      };\r\n\r\n      window.addEventListener('deviceorientation', updateGravity);\r\n\r\n      // Add mouse control\r\n\r\n      var mouse = Mouse.create(render.canvas),\r\n          mouseConstraint = MouseConstraint.create(engine, {\r\n          mouse: mouse,\r\n          constraint: {\r\n            stiffness: 1,\r\n            render: {\r\n              visible: false\r\n            }\r\n          }\r\n        });\r\n\r\n      World.add(engine.world, mouseConstraint);\r\n\r\n      // keep the mouse in sync with rendering\r\n      render.mouse = mouse;\r\n\r\n      var mouseX,\r\n          mouseY,\r\n          mouseXO,\r\n          mouseYO,\r\n          mouseXN,\r\n          mouseYN;\r\n\r\n      // Hover\r\n      Events.on(mouseConstraint, \"mousemove\", function(e) {\r\n        mouseX = e.mouse.absolute.x;\r\n        mouseY = e.mouse.absolute.y;\r\n        if (Query.point(bodies, { x: mouseX, y: mouseY }).length) {\r\n          // remove exitsing hovers\r\n          removeHovers();\r\n          // apply new hover\r\n          var underMouse = Query.point(bodies, { x: mouseX, y: mouseY })[0].id;\r\n          document.getElementById(underMouse).className += \" hover\";\r\n          document.body.style.cursor = \"pointer\";\r\n        } else {\r\n          removeHovers();\r\n        }\r\n      });\r\n\r\n      function removeHovers() {\r\n        var hovered = document.getElementsByClassName(\"hover\");\r\n        for (var i = 0; i < hovered.length; i++) {\r\n          hovered[i].classList.remove(\"hover\");\r\n        }\r\n        document.body.style.cursor = \"auto\";\r\n      }\r\n\r\n      // Press (1)\r\n      Events.on(mouseConstraint, \"mousedown\", function(e) {\r\n        mouseXO = e.mouse.absolute.x;\r\n        mouseYO = e.mouse.absolute.y;\r\n      });\r\n      // Press (2), part 1 and 2 checks is not end of drag\r\n      Events.on(mouseConstraint, \"mouseup\", function(e) {\r\n        mouseXN = e.mouse.absolute.x;\r\n        mouseYN = e.mouse.absolute.y;\r\n        if ((mouseXO == mouseXN) && (mouseYO == mouseYN)) {\r\n          if (Query.point(bodies, { x: mouseXN, y: mouseYN }).length) {\r\n            var underMouse = Query.point(bodies, { x: mouseXN, y: mouseYN })[0].id;\r\n          }\r\n          if (underMouse) {\r\n            // go to URL\r\n            window.location.href = document.getElementById(underMouse).getAttribute(\"data-url\");\r\n          }\r\n        }\r\n        removeHovers();\r\n      });\r\n\r\n      window.requestAnimationFrame(update);\r\n\r\n      function update() {\r\n\r\n        // strips\r\n        for (var i = 0, l = bodiesDom.length; i < l; i++) {\r\n          var bodyDom = bodiesDom[i];\r\n          var body = null;\r\n          for (var j = 0, k = bodies.length; j < k; j++) {\r\n            if (bodies[j].id == bodyDom.id) {\r\n              body = bodies[j];\r\n              break;\r\n            }\r\n          }\r\n\r\n          if (body === null) continue;\r\n\r\n          bodyDom.style.transform = \"translate( \" +\r\n            (body.position.x - bodyDom.offsetWidth / 2) +\r\n            \"px, \" +\r\n            (body.position.y - bodyDom.offsetHeight / 2) +\r\n            \"px )\";\r\n          bodyDom.style.transform += \"rotate( \" + body.angle + \"rad )\";\r\n        }\r\n\r\n        window.requestAnimationFrame(update);\r\n      }\r\n    }\r\n\r\n    makeWorld();\r\n\r\n    function debounce(func, wait, immediate) {\r\n      var timeout;\r\n      return function() {\r\n        var context = this, args = arguments;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(function() {\r\n          timeout = null;\r\n          if (!immediate) func.apply(context, args);\r\n        }, wait);\r\n        if (immediate && !timeout) func.apply(context, args);\r\n      };\r\n    }\r\n\r\n    var refreshWorld = debounce(function() {\r\n      location.reload();\r\n    }, 500);\r\n  \r\n  window.addEventListener('resize', refreshWorld);\r\n  }\r\n  render() {\r\n    return <div ref=\"scene\" />;\r\n  }\r\n}\r\nexport default Scene;"]},"metadata":{},"sourceType":"module"}