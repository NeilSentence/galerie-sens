{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nilss\\\\Desktop\\\\Projects\\\\galerie-sens\\\\src\\\\components\\\\menudrop.js\";\nimport React from \"react\";\nimport Matter from \"matter-js\";\nimport Dummy from './dummies';\n/*\r\n\tset menu display state to false:\r\n\tthis.props.toggle({menuDrop:false})\r\n\r\n\tget current state:\r\n\tthis.props.state()\r\n*/\n\nclass Scene extends React.Component {\n  constructor(props) {\n    super(props); // TODO: eigentlich muss window state ein paar Stufen höher und ge-propt werden.\n\n    this.style = {\n      wrapper: {\n        display: \"block\",\n        height: '100vh',\n        width: '100vw',\n        position: 'fixed',\n        background: 'rgba(255,255,255,0.88)'\n      },\n      blocks: {},\n      menulink: {// TODO: hier kann man schön conditional logic als breakpoints fahren, abhängig von this.state.width /.height\n      }\n    };\n\n    this.update = () => {\n      /*\r\n        TODO: adjust size of object on updaste to adjust for changing text blocks:\r\n        const { width, height } = fallables[i].getBoundingClientRect();\r\n      */\n      console.dir(\"Called in: menudrop.js; prop willNonMenuHtmlbeRemoved: \" + this.state.willNonMenuHtmlbeRemoved());\n      console.dir(menulinks); // leer!\n\n      menulinks.bodies.forEach((block, i) => {\n        const thisFallable = fallables[i];\n        const {\n          x,\n          y\n        } = block.vertices[0];\n        console.log(x + \",\" + y);\n        thisFallable.style.top = `${y}px`;\n        thisFallable.style.left = `${x}px`;\n        thisFallable.style.transform = `translate(-50%, -50%) \n\t                             rotate(${block.angle}rad) \n\t                             translate(50%, 50%)`;\n      });\n\n      if (typeof colorblocks === 'object') {\n        colorblocks.bodies.forEach((block, i) => {\n          const thisFallable = super_delayed_fallables[i];\n          const {\n            x,\n            y\n          } = block.vertices[0];\n          thisFallable.style.top = `${y}px`;\n          thisFallable.style.left = `${x}px`;\n          thisFallable.style.transform = `translate(-50%, -50%) \n\t\t                             rotate(${block.angle}rad) \n\t\t                             translate(50%, 50%)`;\n        });\n      }\n\n      if (typeof htmlblocks === 'object') {\n        this.removeStuff(htmlblocks);\n        htmlblocks.bodies.forEach((block, i) => {\n          const thisFallable = delayed_fallables[i];\n          const {\n            x,\n            y\n          } = block.vertices[0]; //console.log(\"Called in: menudrop.js; htmlblocks x,y:\"+x+\",\"+y)\n\n          thisFallable.style.top = `${y}px`;\n          thisFallable.style.left = `${x}px`;\n          thisFallable.style.transform = `translate(-50%, -50%) \n\t\t                             rotate(${block.angle}rad) \n\t\t                             translate(50%, 50%)`;\n        });\n      }\n\n      Engine.update(engine);\n      requestAnimationFrame(this.update);\n    };\n\n    this.removeStuff = wovon => {\n      // this.props.toggle({menuDrop:false})\n      const removeHTMLfromWorld = this.state.willNonMenuHtmlbeRemoved;\n      if (removeHTMLfromWorld === true) Matter.Composite.clear(wovon, false);\n    };\n\n    this.updateDimensions = () => {\n      this.setState({\n        height: window.innerHeight,\n        width: window.innerWidth\n      });\n    };\n\n    this.state = {\n      height: window.innerHeight,\n      width: window.innerWidth,\n      willNonMenuHtmlbeRemoved: this.props.willNonMenuHtmlbeRemoved\n    };\n    window.addEventListener(\"resize\", this.updateDimensions);\n    this.updateDimensions = this.updateDimensions.bind(this);\n    this.update = this.update.bind(this);\n    this.removeStuff = this.removeStuff.bind(this);\n  }\n\n  componentDidMount() {\n    let world, engine, runner;\n    const {\n      Engine,\n      Runner,\n      World,\n      Bodies,\n      MouseConstraint,\n      Composites,\n      Body\n    } = Matter;\n    const fallables = document.querySelectorAll(\".fallable\");\n    const delayed_fallables = document.querySelectorAll(\".delayed-fallable\");\n    const super_delayed_fallables = document.querySelectorAll(\".super-delayed-fallable\"); // switch var for left / right side image drop:\n    // let xPosSwitch = true\n\n    engine = Engine.create({\n      positionIterations: 10,\n      velocityIterations: 8\n    });\n    world = engine.world; // create runner\n\n    runner = Runner.create();\n    Runner.start(runner, engine);\n    let windowheight = window.innerHeight;\n    let windowwidth = window.innerWidth;\n    const menulinks = Composites.stack( // xx, yy, columns, rows, columnGap, rowGap, cb\n    0, 0, fallables.length, 1, 0, 0, (xx, yy, i) => {\n      const {\n        width,\n        height\n      } = fallables[i].getBoundingClientRect();\n      const xPos = Math.floor(Math.random() * (windowwidth - 200) + 1);\n      const yPos = -windowheight + 200;\n      const box = Bodies.rectangle(xPos, yPos, width, height, {//isStatic: i === 0 || i + 1 === fallables.length\n      });\n\n      const randomAngularV = () => Math.random() > 0.5 ? 1 : -1;\n\n      Body.setAngularVelocity(box, Math.PI / 500 * randomAngularV());\n      return box;\n    });\n    let colorblocks = false;\n\n    const delayedSizing = () => {\n      colorblocks = Composites.stack(0, 0, super_delayed_fallables.length, 1, 0, 0, (xx, yy, i) => {\n        const {\n          width,\n          height\n        } = super_delayed_fallables[i].getBoundingClientRect();\n        const xPos = Math.floor(Math.random() * (windowwidth - 200) + 1);\n        const yPos = -windowheight + 200;\n        const box = Bodies.rectangle(xPos, yPos, width, height, {\n          isStatic: true\n        });\n\n        const randomAngularV = () => Math.random() > 0.5 ? 1 : -1;\n\n        Body.setAngularVelocity(box, Math.PI / 5 * randomAngularV());\n        return box;\n      });\n      World.add(world, [colorblocks]);\n      super_delayed_fallables.forEach(e => {\n        e.style.position = \"absolute\";\n      });\n\n      const dropColors = () => {\n        colorblocks.bodies.forEach(block => {\n          Body.setStatic(block, false); // mach sie nur noch isStatic:false\n        });\n      };\n\n      setTimeout(dropColors, 3200);\n    };\n\n    setTimeout(delayedSizing, 50); // console.log(\"Called in: menudrop.js; typeof menulinks (should be object):\"+typeof menulinks) \n\n    const wallThickness = 100;\n    const wallHeight = windowheight * 2;\n    const wallY = 0;\n    const floor = Matter.Bodies.rectangle(windowwidth / 2, windowheight, windowwidth, 100);\n    const wallR = Matter.Bodies.rectangle(windowwidth + 50, wallY, wallThickness, wallHeight);\n    const wallL = Matter.Bodies.rectangle(-50, wallY, wallThickness, wallHeight);\n    const ceil = Matter.Bodies.rectangle(windowwidth / 2, -windowheight - 50, windowwidth, 100);\n    Body.setStatic(floor, true);\n    Body.setStatic(wallR, true);\n    Body.setStatic(wallL, true);\n    Body.setStatic(ceil, true);\n    const mouseConstraint = MouseConstraint.create(engine, {\n      element: document.querySelector(\"#mjs-wrapper\")\n    });\n    World.add(world, [menulinks, mouseConstraint, floor, wallL, wallR, ceil]);\n    let htmlblocks = false;\n\n    const addStuff = () => {\n      htmlblocks = Composites.stack(0, 0, delayed_fallables.length, 1, 0, 0, (xx, yy, i) => {\n        const {\n          x,\n          y,\n          width,\n          height\n        } = delayed_fallables[i].getBoundingClientRect();\n        let xPos, yPos;\n        xPos = x;\n        yPos = y;\n        const box = Bodies.rectangle(xPos, yPos, width, height, {});\n\n        const randomAngularV = () => Math.random() > 0.5 ? 1 : -1;\n\n        Body.setAngularVelocity(box, Math.PI / 1000 * randomAngularV());\n        return box;\n      });\n      World.add(world, [htmlblocks]);\n      delayed_fallables.forEach(e => {\n        e.style.position = \"absolute\";\n      });\n    };\n\n    setTimeout(addStuff, 2000);\n    fallables.forEach(el => {\n      alert(\"y\");\n      el.style.position = \"absolute\";\n    });\n    this.update();\n    this.updateDimensions();\n  }\n\n  componentWillUnmount() {\n    // cancel matter\n    World.clear(world);\n    Engine.clear(engine);\n    Runner.stop(runner);\n  }\n\n  render() {\n    const Dummies = [];\n\n    for (let i = 0; i < this.props.numberOfDummies; i++) {\n      Dummies.push( /*#__PURE__*/React.createElement(Dummy, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 20\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mjs-wrapper\",\n      style: this.style.wrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 4\n      }\n    }, this.props.elements, Dummies);\n  }\n\n}\n\nexport default Scene;\n/*\r\n\r\n if(e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel'){\r\n        var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n        x = touch.pageX;\r\n        y = touch.pageY;\r\n    } else if (e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover'|| e.type=='mouseout' || e.type=='mouseenter' || e.type=='mouseleave') {\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n    }\r\n\r\n*/","map":{"version":3,"sources":["C:/Users/nilss/Desktop/Projects/galerie-sens/src/components/menudrop.js"],"names":["React","Matter","Dummy","Scene","Component","constructor","props","style","wrapper","display","height","width","position","background","blocks","menulink","update","console","dir","state","willNonMenuHtmlbeRemoved","menulinks","bodies","forEach","block","i","thisFallable","fallables","x","y","vertices","log","top","left","transform","angle","colorblocks","super_delayed_fallables","htmlblocks","removeStuff","delayed_fallables","Engine","engine","requestAnimationFrame","wovon","removeHTMLfromWorld","Composite","clear","updateDimensions","setState","window","innerHeight","innerWidth","addEventListener","bind","componentDidMount","world","runner","Runner","World","Bodies","MouseConstraint","Composites","Body","document","querySelectorAll","create","positionIterations","velocityIterations","start","windowheight","windowwidth","stack","length","xx","yy","getBoundingClientRect","xPos","Math","floor","random","yPos","box","rectangle","randomAngularV","setAngularVelocity","PI","delayedSizing","isStatic","add","e","dropColors","setStatic","setTimeout","wallThickness","wallHeight","wallY","wallR","wallL","ceil","mouseConstraint","element","querySelector","addStuff","el","alert","componentWillUnmount","stop","render","Dummies","numberOfDummies","push","elements"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport Matter from \"matter-js\"\r\nimport Dummy from './dummies'\r\n\r\n\r\n/*\r\n\tset menu display state to false:\r\n\tthis.props.toggle({menuDrop:false})\r\n\r\n\tget current state:\r\n\tthis.props.state()\r\n*/\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Scene extends React.Component {\r\n\t\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\t// TODO: eigentlich muss window state ein paar Stufen höher und ge-propt werden.\r\n\t\tthis.state = {\r\n\t      \theight: window.innerHeight,\r\n\t      \twidth: window.innerWidth,\r\n\t      \twillNonMenuHtmlbeRemoved: this.props.willNonMenuHtmlbeRemoved\r\n\t    }\r\n\t    window.addEventListener(\"resize\", this.updateDimensions)\r\n\t    this.updateDimensions = this.updateDimensions.bind(this)\r\n\t    this.update = this.update.bind(this)\r\n\t    this.removeStuff = this.removeStuff.bind(this)\r\n\t}\r\n\r\n\tstyle = {\r\n\t    wrapper: {\r\n\t      display: \"block\",\r\n\t      height:     '100vh',\r\n\t      width:      '100vw',\r\n\t      position:   'fixed',\r\n\t      background: 'rgba(255,255,255,0.88)'\r\n\t    },\r\n\t    blocks: {},\r\n\t    menulink: {\r\n\t    \t// TODO: hier kann man schön conditional logic als breakpoints fahren, abhängig von this.state.width /.height\r\n\t    }\r\n  \t}\r\n  \tupdate = () => {\r\n  \t\t/*\r\n\t\t    TODO: adjust size of object on updaste to adjust for changing text blocks:\r\n\t\t    const { width, height } = fallables[i].getBoundingClientRect();\r\n\t\t*/\r\n\t\tconsole.dir(\"Called in: menudrop.js; prop willNonMenuHtmlbeRemoved: \"+this.state.willNonMenuHtmlbeRemoved())\r\n\t\tconsole.dir(menulinks) // leer!\r\n\t  \tmenulinks.bodies.forEach((block, i) => {\r\n\t\t    const thisFallable = fallables[i]\r\n\t\t    const {x, y} = block.vertices[0]\r\n\t\t    console.log(x+\",\"+y)\r\n\t\t    thisFallable.style.top = `${y}px`\r\n\t\t    thisFallable.style.left = `${x}px`\r\n\t\t    thisFallable.style.transform = `translate(-50%, -50%) \r\n\t                             rotate(${block.angle}rad) \r\n\t                             translate(50%, 50%)`\r\n\t\t});\r\n\t\tif (typeof colorblocks === 'object')  {\r\n\t\t\t\r\n\t\t\tcolorblocks.bodies.forEach((block, i) => {\r\n\t\t\t    const thisFallable = super_delayed_fallables[i]\r\n\t\t\t    const {x, y} = block.vertices[0]\r\n\t\t\t    thisFallable.style.top = `${y}px`\r\n\t\t\t    thisFallable.style.left = `${x}px`\r\n\t\t\t    thisFallable.style.transform = `translate(-50%, -50%) \r\n\t\t                             rotate(${block.angle}rad) \r\n\t\t                             translate(50%, 50%)`\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (typeof htmlblocks === 'object') {\r\n\t\t\tthis.removeStuff(htmlblocks)\r\n\t\t\t\r\n\t\t\thtmlblocks.bodies.forEach((block, i) => {\r\n\t\t\t    const thisFallable = delayed_fallables[i]\r\n\t\t\t    const {x, y} = block.vertices[0]\r\n\t\t\t    //console.log(\"Called in: menudrop.js; htmlblocks x,y:\"+x+\",\"+y)\r\n\t\t\t    thisFallable.style.top = `${y}px`\r\n\t\t\t    thisFallable.style.left = `${x}px`\r\n\t\t\t    thisFallable.style.transform = `translate(-50%, -50%) \r\n\t\t                             rotate(${block.angle}rad) \r\n\t\t                             translate(50%, 50%)`\r\n\t\t\t});\r\n\t\t}\r\n\t\t\tEngine.update(engine)\r\n\t\t\trequestAnimationFrame(this.update)\r\n\t}\r\n\t\r\n\tremoveStuff = wovon => {\r\n\t\t// this.props.toggle({menuDrop:false})\r\n\t\tconst removeHTMLfromWorld = this.state.willNonMenuHtmlbeRemoved\r\n\t\tif (removeHTMLfromWorld === true) Matter.Composite.clear(wovon, false)\r\n\t}\r\n\r\n  \tcomponentDidMount(){\r\n  \t\tlet world, engine, runner\r\n\r\n\t\tconst { Engine, Runner, World, Bodies, MouseConstraint, Composites, Body } = Matter\r\n\r\n\t\tconst fallables = document.querySelectorAll(\".fallable\")\r\n\t\tconst delayed_fallables = document.querySelectorAll(\".delayed-fallable\")\r\n\t\tconst super_delayed_fallables = document.querySelectorAll(\".super-delayed-fallable\")\r\n\r\n\t\t// switch var for left / right side image drop:\r\n\t\t// let xPosSwitch = true\r\n\t\tengine = Engine.create({positionIterations:10,velocityIterations:8})\r\n\t\tworld = engine.world\r\n\t\t// create runner\r\n\r\n\t\trunner = Runner.create();\r\n\t\tRunner.start(runner,engine);\r\n\r\n\t\tlet windowheight = window.innerHeight\r\n\t\tlet windowwidth = window.innerWidth\r\n\r\n\t\tconst menulinks = Composites.stack(\t\r\n\t\t\t\t// xx, yy, columns, rows, columnGap, rowGap, cb\r\n\t\t\t\t0, 0, fallables.length, 1, 0, 0,\r\n\t\t\t\t(xx, yy, i) => {\r\n\t\t\t\t\tconst { width, height } = fallables[i].getBoundingClientRect();\r\n\t\t\t\t\tconst xPos = Math.floor((Math.random() * (windowwidth-200)) + 1)\r\n\t\t\t\t\tconst yPos = -windowheight+200\t\t\r\n\t\t\t\tconst box = Bodies.rectangle(xPos, yPos, width, height, {\r\n\t\t  \t\t\t//isStatic: i === 0 || i + 1 === fallables.length\r\n\t\t\t\t})\r\n\t\t\t\tconst randomAngularV = () => (Math.random()>0.5)? 1 : -1;\r\n\t\t\t\tBody.setAngularVelocity( box, Math.PI/500*randomAngularV())\r\n\t\t\t\treturn box\r\n\t\t\t}\r\n\t\t)\r\n\r\n\t\tlet colorblocks = false\r\n\t\tconst delayedSizing = () => {\r\n\t\t    colorblocks = Composites.stack(\t\r\n\t\t\t  \t0, 0, super_delayed_fallables.length, 1, 0, 0,\r\n\t\t\t  \t\t(xx, yy, i) => {\r\n\t\t\t  \t\t\tconst { width, height } = super_delayed_fallables[i].getBoundingClientRect();\r\n\t\t\t  \t\t\tconst xPos = Math.floor((Math.random() * (windowwidth-200)) + 1)\r\n\t\t  \t\t\t\tconst yPos = -windowheight+200\t\r\n\t\t\t    \t\tconst box = Bodies.rectangle(xPos, yPos, width, height, {isStatic:true})\r\n\t\t\t    \t\tconst randomAngularV = () => (Math.random()>0.5)? 1 : -1;\r\n\t\t\t    \t\tBody.setAngularVelocity( box, Math.PI/5*randomAngularV());\r\n\t\t\t    \t\treturn box\r\n\t\t\t    \t}\r\n\t\t    )\r\n\t\t\tWorld.add(world,[colorblocks])\r\n\r\n\t\t\tsuper_delayed_fallables.forEach(e => {\r\n\t\t  \t\te.style.position = \"absolute\"\r\n\t\t\t})\r\n\r\n\t\t\tconst dropColors = () => {\r\n\r\n\t\t\t\tcolorblocks.bodies.forEach((block) => {\r\n\t\t\t\t\tBody.setStatic(block, false)\t\r\n\t\t\t\t\r\n\t\t\t\t// mach sie nur noch isStatic:false\r\n\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t\tsetTimeout(dropColors, 3200)\r\n\r\n\t\t}\r\n\t\tsetTimeout(delayedSizing, 50)\r\n\r\n\t\t// console.log(\"Called in: menudrop.js; typeof menulinks (should be object):\"+typeof menulinks) \r\n\t\tconst wallThickness = 100\r\n\t\tconst wallHeight = windowheight*2\r\n\t\tconst wallY = 0\r\n\t\tconst floor = Matter.Bodies.rectangle(windowwidth/2,windowheight,windowwidth,100)\r\n\t\tconst wallR = Matter.Bodies.rectangle(windowwidth+50,wallY,wallThickness,wallHeight)\r\n\t\tconst wallL = Matter.Bodies.rectangle(-50,wallY,wallThickness,wallHeight)\r\n\t\tconst ceil  = Matter.Bodies.rectangle(windowwidth/2,-windowheight-50,windowwidth,100)\r\n\t\tBody.setStatic(floor, true)\r\n\t\tBody.setStatic(wallR, true)\r\n\t\tBody.setStatic(wallL, true)\r\n\t\tBody.setStatic(ceil,  true)\r\n\r\n\t\tconst mouseConstraint = MouseConstraint.create(\r\n\t\t\t\tengine, {element: document.querySelector(\"#mjs-wrapper\")}\r\n\t\t)\r\n\r\n\t\tWorld.add(world, [menulinks, mouseConstraint, floor, wallL, wallR, ceil])\r\n\r\n\t\tlet htmlblocks = false\r\n\r\n\t\tconst addStuff = () => {\r\n\r\n\t\t\thtmlblocks = Composites.stack(\t\r\n\t\t  \t\t0, 0, delayed_fallables.length, 1, 0, 0,\r\n\t\t  \t\t(xx, yy, i) => {\r\n\t\t  \t\t\tconst {x, y, width, height} = delayed_fallables[i].getBoundingClientRect();\r\n\t\t  \t\t\tlet xPos, yPos\r\n\t\t  \t\t\txPos = x; yPos = y\r\n\t\t    \t\tconst box = Bodies.rectangle(xPos, yPos, width, height, {})\r\n\t\t    \t\tconst randomAngularV = () => (Math.random()>0.5)? 1 : -1;\r\n\t\t    \t\tBody.setAngularVelocity( box, Math.PI/1000*randomAngularV());\r\n\t\t    \t\treturn box\r\n\t\t    \t}\r\n\t\t\t)\r\n\t\t\tWorld.add(world,[htmlblocks])\r\n\r\n\t\t\tdelayed_fallables.forEach(e => {\r\n\t\t\t\t\te.style.position = \"absolute\"\r\n\t\t\t})\r\n\t\t}\r\n\t\tsetTimeout(addStuff, 2000)\r\n\r\n\r\n\t\tfallables.forEach(el => {\r\n\t\t\talert(\"y\")\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t})\r\n\t\tthis.update()\r\n\t\tthis.updateDimensions()\r\n\t}\r\n\r\n\r\n\tcomponentWillUnmount(){\r\n\t\t// cancel matter\r\n\t\tWorld.clear(world);\r\n        Engine.clear(engine);\r\n        Runner.stop(runner);\r\n\t} \r\n\r\n\tupdateDimensions = () => {\r\n    \tthis.setState({\r\n\t      \theight: window.innerHeight,\r\n\t      \twidth: window.innerWidth\r\n    \t})\r\n   \t}\r\n   \t\r\n   \trender(){\r\n\t\tconst Dummies = []\r\n\t\tfor (let i=0; i < this.props.numberOfDummies; i++) {\r\n   \t\t\tDummies.push(<Dummy/>);\r\n\t\t} \r\n\t  \t\r\n\t  \treturn (\r\n\t\t\t<div id=\"mjs-wrapper\" style={this.style.wrapper}>\r\n\t\t\t\t{this.props.elements}\r\n\t\t\t\t{Dummies}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default Scene\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n\r\n if(e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel'){\r\n        var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n        x = touch.pageX;\r\n        y = touch.pageY;\r\n    } else if (e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover'|| e.type=='mouseout' || e.type=='mouseenter' || e.type=='mouseleave') {\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n    }\r\n\r\n*/"]},"metadata":{},"sourceType":"module"}