{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nilss\\\\Desktop\\\\Projects\\\\galerie-sens\\\\src\\\\components\\\\menudrop.js\";\nimport React from \"react\";\nimport Dummy from './dummies';\nimport Matter from 'matter-js';\n/*\r\n\tset menu display state to false:\r\n\tthis.props.toggleRemoveNonMenuHtml()\r\n\r\n\tget current state:\r\n\tthis.props.state()\r\n*/\n\nlet world, engine, runner;\nconst {\n  Engine,\n  Runner,\n  World,\n  Bodies,\n  MouseConstraint,\n  Composites,\n  Body\n} = Matter;\n\nclass Scene extends React.Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return false;\n  }\n\n  constructor(props) {\n    super(props); // TODO: eigentlich muss window state ein paar Stufen höher und ge-propt werden.\n\n    this.style = {\n      wrapper: {\n        display: 'block',\n        height: '100vh',\n        width: '100vw',\n        position: 'fixed',\n        background: 'rgba(25,25,25,0.88)',\n        zIndex: 2\n      },\n      blocks: {},\n      menulink: {// TODO: hier kann man schön conditional logic als breakpoints fahren, abhängig von this.state.width /.height\n      }\n    };\n\n    this.run = () => {\n      // define DomElement Lists\n      const fallables = document.querySelectorAll(\".fallable\");\n      let delayed_fallables = document.querySelectorAll(\".delayed-fallable\");\n      const super_delayed_fallables = document.querySelectorAll(\".super-delayed-fallable\"); // declare names for matter stack objects, to be filled with Bodies based on DomElements Lists \n\n      let menulinks,\n          colorblocks,\n          htmlblocks = false; // switch var for left / right side image drop:\n      // let xPosSwitch = true\n      // initialize Engine / World\n\n      engine = Engine.create({\n        positionIterations: 10,\n        velocityIterations: 8\n      });\n      world = engine.world;\n      runner = Runner.create(); // Start Runner & set timescale\n\n      Runner.start(runner, engine);\n      engine.timing.timeScale = 0.4; // function to setup / size matter objects:\n\n      const sizeBoxes = (DomElements, randomPosition, AngularVelocity) => {\n        const matterStack = Composites.stack( // xx, yy, columns, rows, columnGap, rowGap, cb\n        0, 0, DomElements.length, 1, 0, 0, (xx, yy, i) => {\n          const {\n            x,\n            y,\n            width,\n            height\n          } = DomElements[i].getBoundingClientRect();\n          let xPos, yPos;\n\n          if (randomPosition) {\n            xPos = Math.floor(Math.random() * (this.state.width - 200) + 1);\n            yPos = -this.state.height + 200;\n          } else {\n            xPos = x;\n            yPos = y;\n          }\n\n          const box = Bodies.rectangle(xPos, yPos, width, height, {\n            isStatic: true\n          });\n\n          const randomAngularV = () => Math.random() > 0.5 ? 1 : -1;\n\n          Body.setAngularVelocity(box, Math.PI / AngularVelocity * randomAngularV());\n          return box;\n        });\n        return matterStack;\n      };\n\n      const dropStuff = matterStack => {\n        // mach sie nur noch isStatic:false\n        matterStack.bodies.forEach(block => {\n          Body.setStatic(block, false);\n        });\n      };\n\n      menulinks = sizeBoxes(fallables, true, 500);\n      World.add(world, [menulinks]);\n      dropStuff(menulinks);\n\n      const delayedSizingColorBlocks = () => {\n        colorblocks = sizeBoxes(super_delayed_fallables, true, 50);\n        World.add(world, [colorblocks]);\n\n        const dropColor = () => dropStuff(colorblocks);\n\n        setTimeout(dropColor, 2500);\n      };\n\n      setTimeout(delayedSizingColorBlocks, 50); // console.log(\"Called in: menudrop.js; typeof menulinks (should be object):\"+typeof menulinks) \n\n      const wallThickness = 100;\n      const wallHeight = this.state.height * 2;\n      const wallY = 0;\n      const floor = Matter.Bodies.rectangle(this.state.width / 2, this.state.height, this.state.width, 100);\n      const wallR = Matter.Bodies.rectangle(this.state.width + 50, wallY, wallThickness, wallHeight);\n      const wallL = Matter.Bodies.rectangle(-50, wallY, wallThickness, wallHeight);\n      const ceil = Matter.Bodies.rectangle(this.state.width / 2, -this.state.height - 50, this.state.width, 100);\n      Body.setStatic(floor, true);\n      Body.setStatic(wallR, true);\n      Body.setStatic(wallL, true);\n      Body.setStatic(ceil, true);\n      const mouseConstraint = MouseConstraint.create(engine, {\n        element: document.querySelector(\"#mjs-wrapper\")\n      });\n      World.add(world, [mouseConstraint, floor, wallL, wallR, ceil]);\n\n      const addStuff = () => {\n        htmlblocks = sizeBoxes(delayed_fallables, false, 1000);\n        delayed_fallables.forEach(el => {\n          el.style.background = 'rgb(250,250,250)';\n        });\n        World.add(world, [htmlblocks]); // TODO: BUG: Dies wird auch ausgeführt, wenn Menü frühzeitig wieder geschlossen wird.\n        // Denn: der setTimeout wird nicht gecancelt.\n        // if (document.querySelector('.sctn_header') !== null) document.querySelector('.sctn_header').style.flexDirection = 'row-reverse'\n\n        dropStuff(htmlblocks);\n      };\n\n      setTimeout(addStuff, 2000); // mouse / touch position readouts:\n\n      let origMouseX, origMouseY;\n      let mouseHasMoved = false;\n      fallables.forEach(el => {\n        el.addEventListener(\"mousedown\", e => {\n          // Es gibt schon den \"navigate to href\" Event Listener im Menulink Component\n          // man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\n          // get mouse position and navigate only when it hasn't changed much.\n          // DEBUG: console.log('mousedown')\n          const recordOrigMousePos = () => {\n            const event = window.event;\n            origMouseX = event.pageX;\n            origMouseY = event.pageY; // DEBUG: console.log(\"Called in: menudrop.js; mouseHasMoved, origMouseX, origMouseY: \"+mouseHasMoved, origMouseX, origMouseY)\n          };\n\n          if (mouseHasMoved) recordOrigMousePos();\n        });\n        el.addEventListener(\"touchstart\", e => {\n          // DEBUG: console.log('touchstart')\n          const recordOrigMousePos = () => {\n            const event = window.event; // DEBUG: console.dir(\"Called in: menudrop.js; (touch)event: \"+event) // get touch event\n\n            origMouseX = event.changedTouches[0].pageX;\n            origMouseY = event.changedTouches[0].pageY; // DEBUG: console.log(\"Called in: menudrop.js; at touch start: mouseHasMoved: \"+mouseHasMoved+\"at: \"+origMouseX, origMouseY)\n          }; //if (mouseHasMoved) \n\n\n          recordOrigMousePos();\n        });\n        el.addEventListener(\"mousemove\", e => {\n          // DEBUG: console.log('mousemove')\n          mouseHasMoved = true;\n        });\n        el.addEventListener(\"touchmove\", e => {\n          // DEBUG: console.log('touchmove')\n          mouseHasMoved = true;\n        });\n        el.addEventListener(\"mouseup\", e => {\n          // DEBUG: console.log('mouseup')\n          const event = window.event;\n          const newMouseX = event.pageX;\n          const newMouseY = event.pageY;\n\n          if (!(newMouseX > origMouseX + 5 || newMouseY > origMouseY + 5 || newMouseY < origMouseY - 5 || newMouseX < origMouseX - 5)) {\n            // DEBUG: alert(\"OPosX:\"+origMouseX+\" OPosX:\"+origMouseY+\" NPosX:\"+newMouseX+\" NPosX:\"+newMouseY)\n            // navigate to link target:\n            // hack: add class: \"clickable\" for navigation\n            el.classList.add(\"clickable\"); // DEBUG: alert(\"Called in: menudrop.js; @mouseup; props.removeNonMenuHtml: \"+this.props.removeNonMenuHtml)\n            // DEBUG: console.dir(\"Called in: menudrop.js; @mouseup: el.classList: \"+el.classList)\n          }\n\n          mouseHasMoved = false;\n        });\n        el.addEventListener(\"touchend\", e => {\n          // DEBUG: console.log('touchend')\n          const event = window.event;\n          const newMouseX = event.changedTouches[0].pageX;\n          const newMouseY = event.changedTouches[0].pageY;\n          console.log('newMouseX: ' + newMouseX + ', newMouseY: ' + newMouseY + ', origMouseX: ' + origMouseX + ', origMouseY: ' + origMouseY);\n\n          if (!(newMouseX > origMouseX + 5 || newMouseY > origMouseY + 5 || newMouseY < origMouseY - 5 || newMouseX < origMouseX - 5)) {\n            // DEBUG: alert(\"OPosX:\"+origMouseX+\" OPosX:\"+origMouseY+\" NPosX:\"+newMouseX+\" NPosX:\"+newMouseY)\n            // navigate to link target:\n            // hack: add class: \"clickable\" for navigation\n            el.classList.add(\"clickable\"); // alert(this.props.removeNonMenuHtml)\n            // DEBUG: console.dir(\"Called in: menudrop.js; after touch: \"+el.classList)\n          }\n\n          mouseHasMoved = false;\n        }); // TODO: garbage collect event listeners!\n      }); // wird im update immer wieder ausgeführt:\n      // takes matter stack & the corresponding DOM-Elements list as input\n      // assigns new top,left and transform: rotation\n\n      const updateBoxes = (matterElements, DomElements) => {\n        if (typeof matterElements === 'object') {\n          matterElements.bodies.forEach((block, i) => {\n            const thisFallable = DomElements[i];\n            const {\n              x,\n              y\n            } = block.vertices[0]; //console.log(\"Called in: menudrop.js; matterElement x,y:\"+x+\",\"+y)\n\n            thisFallable.style.position = 'fixed';\n            thisFallable.style.top = `${y}px`;\n            thisFallable.style.left = `${x}px`;\n            thisFallable.style.transform = `translate(-50%, -50%) rotate(${block.angle}rad) translate(50%, 50%)`;\n          });\n        } else {\n          console.log('Matter Composite Stack not (yet) instantiated.');\n        }\n      };\n\n      const update = () => {\n        /*\r\n          TODO: adjust size of object on update to adjust for changing text blocks:\r\n          const { width, height } = fallables[i].getBoundingClientRect();\r\n        */\n        // DEBUG:console.dir(\"Called in: menudrop.js at top of update fn; prop removeNonMenuHtml: \"+this.props.removeNonMenuHtml)\n        updateBoxes(menulinks, fallables);\n        updateBoxes(colorblocks, super_delayed_fallables);\n\n        if (!this.props.removeNonMenuHtml()) {\n          // DEBUG: console.log(\"removeNonMenuHtml false\")\n          // each render cycle: declare new delayed fallables:\t\t\t\t\n          updateBoxes(htmlblocks, delayed_fallables);\n        } else {\n          // DEBUG: console.log(\"removeNonMenuHtml true\")\n          if (typeof htmlblocks === 'object') Matter.Composite.clear(htmlblocks, false);\n        }\n\n        Engine.update(engine);\n        window.requestAnimationFrame(update);\n      };\n\n      update();\n    };\n\n    this.updateDimensions = () => {\n      this.setState({\n        height: window.innerHeight,\n        width: window.innerWidth\n      });\n    };\n\n    this.state = {\n      height: window.innerHeight,\n      width: window.innerWidth\n    };\n    window.addEventListener(\"resize\", this.updateDimensions);\n    this.updateDimensions = this.updateDimensions.bind(this);\n    this.run = this.run.bind(this);\n  }\n\n  componentDidMount() {\n    this.run();\n    this.updateDimensions();\n  }\n\n  componentDidUpdate() {\n    this.updateDimensions();\n  }\n\n  componentWillUnmount() {\n    // cancel matter\n    // remove event listeners?\n    Runner.stop(runner);\n    World.clear(world);\n    Engine.clear(engine); // set removeNonMenuHtml flag\n  }\n\n  render() {\n    const Dummies = [];\n\n    for (let i = 0; i < this.props.numberOfDummies; i++) {\n      Dummies.push( /*#__PURE__*/React.createElement(Dummy, {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 20\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mjs-wrapper\",\n      style: this.style.wrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 4\n      }\n    }, this.props.elements, Dummies);\n  }\n\n}\n\nexport default Scene;\n/*\r\n\r\n if(e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel'){\r\n        var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n        x = touch.pageX;\r\n        y = touch.pageY;\r\n    } else if (e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover'|| e.type=='mouseout' || e.type=='mouseenter' || e.type=='mouseleave') {\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n    }\r\n\r\n*/","map":{"version":3,"sources":["C:/Users/nilss/Desktop/Projects/galerie-sens/src/components/menudrop.js"],"names":["React","Dummy","Matter","world","engine","runner","Engine","Runner","World","Bodies","MouseConstraint","Composites","Body","Scene","Component","shouldComponentUpdate","nextProps","nextState","constructor","props","style","wrapper","display","height","width","position","background","zIndex","blocks","menulink","run","fallables","document","querySelectorAll","delayed_fallables","super_delayed_fallables","menulinks","colorblocks","htmlblocks","create","positionIterations","velocityIterations","start","timing","timeScale","sizeBoxes","DomElements","randomPosition","AngularVelocity","matterStack","stack","length","xx","yy","i","x","y","getBoundingClientRect","xPos","yPos","Math","floor","random","state","box","rectangle","isStatic","randomAngularV","setAngularVelocity","PI","dropStuff","bodies","forEach","block","setStatic","add","delayedSizingColorBlocks","dropColor","setTimeout","wallThickness","wallHeight","wallY","wallR","wallL","ceil","mouseConstraint","element","querySelector","addStuff","el","origMouseX","origMouseY","mouseHasMoved","addEventListener","e","recordOrigMousePos","event","window","pageX","pageY","changedTouches","newMouseX","newMouseY","classList","console","log","updateBoxes","matterElements","thisFallable","vertices","top","left","transform","angle","update","removeNonMenuHtml","Composite","clear","requestAnimationFrame","updateDimensions","setState","innerHeight","innerWidth","bind","componentDidMount","componentDidUpdate","componentWillUnmount","stop","render","Dummies","numberOfDummies","push","elements"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,WAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,IAAIC,KAAJ,EAAWC,MAAX,EAAmBC,MAAnB;AAEA,MAAM;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,MAAV;AAAkBC,EAAAA,KAAlB;AAAyBC,EAAAA,MAAzB;AAAiCC,EAAAA,eAAjC;AAAkDC,EAAAA,UAAlD;AAA8DC,EAAAA;AAA9D,IAAuEV,MAA7E;;AAEA,MAAMW,KAAN,SAAoBb,KAAK,CAACc,SAA1B,CAAoC;AACnCC,EAAAA,qBAAqB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACzC,WAAO,KAAP;AACF;;AAEDC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACjB,UAAMA,KAAN,EADiB,CAEjB;;AAFiB,SAYlBC,KAZkB,GAYV;AACJC,MAAAA,OAAO,EAAE;AACPC,QAAAA,OAAO,EAAK,OADL;AAEPC,QAAAA,MAAM,EAAM,OAFL;AAGPC,QAAAA,KAAK,EAAO,OAHL;AAIPC,QAAAA,QAAQ,EAAI,OAJL;AAKPC,QAAAA,UAAU,EAAE,qBALL;AAMPC,QAAAA,MAAM,EAAE;AAND,OADL;AASJC,MAAAA,MAAM,EAAE,EATJ;AAUJC,MAAAA,QAAQ,EAAE,CACT;AADS;AAVN,KAZU;;AAAA,SA2BhBC,GA3BgB,GA2BV,MAAM;AAEX;AACF,YAAMC,SAAS,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,CAAlB;AACA,UAAIC,iBAAiB,GAAGF,QAAQ,CAACC,gBAAT,CAA0B,mBAA1B,CAAxB;AACA,YAAME,uBAAuB,GAAGH,QAAQ,CAACC,gBAAT,CAA0B,yBAA1B,CAAhC,CALa,CAOb;;AACA,UAAIG,SAAJ;AAAA,UAAeC,WAAf;AAAA,UAA4BC,UAAU,GAAG,KAAzC,CARa,CAUb;AACA;AAEA;;AACAlC,MAAAA,MAAM,GAAGE,MAAM,CAACiC,MAAP,CAAc;AAACC,QAAAA,kBAAkB,EAAC,EAApB;AAAuBC,QAAAA,kBAAkB,EAAC;AAA1C,OAAd,CAAT;AACAtC,MAAAA,KAAK,GAAIC,MAAM,CAACD,KAAhB;AACAE,MAAAA,MAAM,GAAGE,MAAM,CAACgC,MAAP,EAAT,CAhBa,CAmBb;;AACAhC,MAAAA,MAAM,CAACmC,KAAP,CAAarC,MAAb,EAAoBD,MAApB;AACAA,MAAAA,MAAM,CAACuC,MAAP,CAAcC,SAAd,GAA0B,GAA1B,CArBa,CAuBb;;AACA,YAAMC,SAAS,GAAG,CAACC,WAAD,EAAcC,cAAd,EAA8BC,eAA9B,KAAkD;AACnE,cAAMC,WAAW,GAAGtC,UAAU,CAACuC,KAAX,EACjB;AACA,SAFiB,EAEd,CAFc,EAEXJ,WAAW,CAACK,MAFD,EAES,CAFT,EAEY,CAFZ,EAEe,CAFf,EAGjB,CAACC,EAAD,EAAKC,EAAL,EAASC,CAAT,KAAe;AACd,gBAAM;AAAEC,YAAAA,CAAF;AAAKC,YAAAA,CAAL;AAAQhC,YAAAA,KAAR;AAAeD,YAAAA;AAAf,cAA0BuB,WAAW,CAACQ,CAAD,CAAX,CAAeG,qBAAf,EAAhC;AACA,cAAIC,IAAJ,EAAUC,IAAV;;AACA,cAAIZ,cAAJ,EAAoB;AACnBW,YAAAA,IAAI,GAAGE,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,MAAL,MAAiB,KAAKC,KAAL,CAAWvC,KAAX,GAAiB,GAAlC,CAAD,GAA2C,CAAtD,CAAP;AACAmC,YAAAA,IAAI,GAAG,CAAC,KAAKI,KAAL,CAAWxC,MAAZ,GAAmB,GAA1B;AACA,WAHD,MAGO;AACNmC,YAAAA,IAAI,GAAGH,CAAP;AAAUI,YAAAA,IAAI,GAAGH,CAAP;AACV;;AACA,gBAAMQ,GAAG,GAAGvD,MAAM,CAACwD,SAAP,CAAiBP,IAAjB,EAAuBC,IAAvB,EAA6BnC,KAA7B,EAAoCD,MAApC,EAA4C;AAAC2C,YAAAA,QAAQ,EAAC;AAAV,WAA5C,CAAZ;;AACA,gBAAMC,cAAc,GAAG,MAAOP,IAAI,CAACE,MAAL,KAAc,GAAf,GAAqB,CAArB,GAAyB,CAAC,CAAvD;;AACAlD,UAAAA,IAAI,CAACwD,kBAAL,CAAyBJ,GAAzB,EAA8BJ,IAAI,CAACS,EAAL,GAAQrB,eAAR,GAAwBmB,cAAc,EAApE;AACA,iBAAOH,GAAP;AACA,SAhBe,CAApB;AAkBG,eAAOf,WAAP;AACH,OApBD;;AAsBA,YAAMqB,SAAS,GAAGrB,WAAW,IAAI;AAChC;AACAA,QAAAA,WAAW,CAACsB,MAAZ,CAAmBC,OAAnB,CAA4BC,KAAD,IAAW;AACrC7D,UAAAA,IAAI,CAAC8D,SAAL,CAAeD,KAAf,EAAsB,KAAtB;AACA,SAFD;AAGA,OALD;;AAQArC,MAAAA,SAAS,GAAGS,SAAS,CAACd,SAAD,EAAW,IAAX,EAAgB,GAAhB,CAArB;AACAvB,MAAAA,KAAK,CAACmE,GAAN,CAAUxE,KAAV,EAAiB,CAACiC,SAAD,CAAjB;AACAkC,MAAAA,SAAS,CAAClC,SAAD,CAAT;;AAEG,YAAMwC,wBAAwB,GAAG,MAAM;AACtCvC,QAAAA,WAAW,GAAGQ,SAAS,CAACV,uBAAD,EAAyB,IAAzB,EAA8B,EAA9B,CAAvB;AACH3B,QAAAA,KAAK,CAACmE,GAAN,CAAUxE,KAAV,EAAgB,CAACkC,WAAD,CAAhB;;AACA,cAAMwC,SAAS,GAAG,MAAMP,SAAS,CAACjC,WAAD,CAAjC;;AACAyC,QAAAA,UAAU,CAACD,SAAD,EAAY,IAAZ,CAAV;AACG,OALD;;AAMAC,MAAAA,UAAU,CAACF,wBAAD,EAA2B,EAA3B,CAAV,CAhEU,CAoEb;;AACG,YAAMG,aAAa,GAAG,GAAtB;AACH,YAAMC,UAAU,GAAG,KAAKjB,KAAL,CAAWxC,MAAX,GAAkB,CAArC;AACA,YAAM0D,KAAK,GAAG,CAAd;AACG,YAAMpB,KAAK,GAAG3D,MAAM,CAACO,MAAP,CAAcwD,SAAd,CAAwB,KAAKF,KAAL,CAAWvC,KAAX,GAAiB,CAAzC,EAA2C,KAAKuC,KAAL,CAAWxC,MAAtD,EAA6D,KAAKwC,KAAL,CAAWvC,KAAxE,EAA8E,GAA9E,CAAd;AACA,YAAM0D,KAAK,GAAGhF,MAAM,CAACO,MAAP,CAAcwD,SAAd,CAAwB,KAAKF,KAAL,CAAWvC,KAAX,GAAiB,EAAzC,EAA4CyD,KAA5C,EAAkDF,aAAlD,EAAgEC,UAAhE,CAAd;AACA,YAAMG,KAAK,GAAGjF,MAAM,CAACO,MAAP,CAAcwD,SAAd,CAAwB,CAAC,EAAzB,EAA4BgB,KAA5B,EAAkCF,aAAlC,EAAgDC,UAAhD,CAAd;AACA,YAAMI,IAAI,GAAIlF,MAAM,CAACO,MAAP,CAAcwD,SAAd,CAAwB,KAAKF,KAAL,CAAWvC,KAAX,GAAiB,CAAzC,EAA2C,CAAC,KAAKuC,KAAL,CAAWxC,MAAZ,GAAmB,EAA9D,EAAiE,KAAKwC,KAAL,CAAWvC,KAA5E,EAAkF,GAAlF,CAAd;AACAZ,MAAAA,IAAI,CAAC8D,SAAL,CAAeb,KAAf,EAAsB,IAAtB;AACAjD,MAAAA,IAAI,CAAC8D,SAAL,CAAeQ,KAAf,EAAsB,IAAtB;AACAtE,MAAAA,IAAI,CAAC8D,SAAL,CAAeS,KAAf,EAAsB,IAAtB;AACAvE,MAAAA,IAAI,CAAC8D,SAAL,CAAeU,IAAf,EAAsB,IAAtB;AAEH,YAAMC,eAAe,GAAG3E,eAAe,CAAC6B,MAAhB,CACrBnC,MADqB,EACb;AAACkF,QAAAA,OAAO,EAAEtD,QAAQ,CAACuD,aAAT,CAAuB,cAAvB;AAAV,OADa,CAAxB;AAIA/E,MAAAA,KAAK,CAACmE,GAAN,CAAUxE,KAAV,EAAiB,CAACkF,eAAD,EAAkBxB,KAAlB,EAAyBsB,KAAzB,EAAgCD,KAAhC,EAAuCE,IAAvC,CAAjB;;AAEA,YAAMI,QAAQ,GAAG,MAAM;AACtBlD,QAAAA,UAAU,GAAGO,SAAS,CAACX,iBAAD,EAAmB,KAAnB,EAAyB,IAAzB,CAAtB;AACAA,QAAAA,iBAAiB,CAACsC,OAAlB,CAA0BiB,EAAE,IAAI;AAC/BA,UAAAA,EAAE,CAACrE,KAAH,CAASM,UAAT,GAAsB,kBAAtB;AACA,SAFD;AAGAlB,QAAAA,KAAK,CAACmE,GAAN,CAAUxE,KAAV,EAAgB,CAACmC,UAAD,CAAhB,EALsB,CAMtB;AACA;AACA;;AACAgC,QAAAA,SAAS,CAAChC,UAAD,CAAT;AACA,OAVD;;AAWAwC,MAAAA,UAAU,CAACU,QAAD,EAAW,IAAX,CAAV,CAlGa,CAoGb;;AACA,UAAIE,UAAJ,EAAgBC,UAAhB;AACA,UAAIC,aAAa,GAAG,KAApB;AAEA7D,MAAAA,SAAS,CAACyC,OAAV,CAAkBiB,EAAE,IAAI;AACrBA,QAAAA,EAAE,CAACI,gBAAH,CAAoB,WAApB,EAAiCC,CAAC,IAAI;AACpC;AACA;AACA;AACA;AACA,gBAAMC,kBAAkB,GAAG,MAAM;AAChC,kBAAMC,KAAK,GAAGC,MAAM,CAACD,KAArB;AACAN,YAAAA,UAAU,GAAGM,KAAK,CAACE,KAAnB;AACAP,YAAAA,UAAU,GAAGK,KAAK,CAACG,KAAnB,CAHgC,CAIhC;AACA,WALD;;AAMA,cAAIP,aAAJ,EAAmBG,kBAAkB;AACrC,SAZF;AAcCN,QAAAA,EAAE,CAACI,gBAAH,CAAoB,YAApB,EAAkCC,CAAC,IAAI;AACtC;AACA,gBAAMC,kBAAkB,GAAG,MAAM;AAChC,kBAAMC,KAAK,GAAGC,MAAM,CAACD,KAArB,CADgC,CAEhC;;AACAN,YAAAA,UAAU,GAAGM,KAAK,CAACI,cAAN,CAAqB,CAArB,EAAwBF,KAArC;AACAP,YAAAA,UAAU,GAAGK,KAAK,CAACI,cAAN,CAAqB,CAArB,EAAwBD,KAArC,CAJgC,CAKhC;AACA,WAND,CAFsC,CAStC;;;AACAJ,UAAAA,kBAAkB;AAClB,SAXD;AAaAN,QAAAA,EAAE,CAACI,gBAAH,CAAoB,WAApB,EAAiCC,CAAC,IAAI;AACrC;AACAF,UAAAA,aAAa,GAAG,IAAhB;AACA,SAHD;AAKAH,QAAAA,EAAE,CAACI,gBAAH,CAAoB,WAApB,EAAiCC,CAAC,IAAI;AACrC;AACAF,UAAAA,aAAa,GAAG,IAAhB;AACA,SAHD;AAKAH,QAAAA,EAAE,CAACI,gBAAH,CAAoB,SAApB,EAA+BC,CAAC,IAAI;AACnC;AACA,gBAAME,KAAK,GAAGC,MAAM,CAACD,KAArB;AACA,gBAAMK,SAAS,GAAGL,KAAK,CAACE,KAAxB;AACA,gBAAMI,SAAS,GAAGN,KAAK,CAACG,KAAxB;;AACA,cAAI,EAAIE,SAAS,GAAGX,UAAU,GAAC,CAAxB,IAA+BY,SAAS,GAAGX,UAAU,GAAC,CAAtD,IAA6DW,SAAS,GAAGX,UAAU,GAAC,CAApF,IAA2FU,SAAS,GAAGX,UAAU,GAAC,CAArH,CAAJ,EAA+H;AAC9H;AACA;AACA;AACAD,YAAAA,EAAE,CAACc,SAAH,CAAa5B,GAAb,CAAiB,WAAjB,EAJ8H,CAK9H;AACA;AACA;;AACDiB,UAAAA,aAAa,GAAG,KAAhB;AACA,SAdD;AAgBAH,QAAAA,EAAE,CAACI,gBAAH,CAAoB,UAApB,EAAgCC,CAAC,IAAI;AACpC;AACA,gBAAME,KAAK,GAAGC,MAAM,CAACD,KAArB;AACA,gBAAMK,SAAS,GAAGL,KAAK,CAACI,cAAN,CAAqB,CAArB,EAAwBF,KAA1C;AACA,gBAAMI,SAAS,GAAGN,KAAK,CAACI,cAAN,CAAqB,CAArB,EAAwBD,KAA1C;AACAK,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAcJ,SAAd,GAAwB,eAAxB,GAAwCC,SAAxC,GAAkD,gBAAlD,GAAmEZ,UAAnE,GAA8E,gBAA9E,GAA+FC,UAA3G;;AACA,cAAI,EAAIU,SAAS,GAAGX,UAAU,GAAC,CAAxB,IAA+BY,SAAS,GAAGX,UAAU,GAAC,CAAtD,IAA6DW,SAAS,GAAGX,UAAU,GAAC,CAApF,IAA2FU,SAAS,GAAGX,UAAU,GAAC,CAArH,CAAJ,EAA+H;AAC9H;AACA;AACA;AACAD,YAAAA,EAAE,CAACc,SAAH,CAAa5B,GAAb,CAAiB,WAAjB,EAJ8H,CAK9H;AACA;AACA;;AACDiB,UAAAA,aAAa,GAAG,KAAhB;AACA,SAfD,EAtDoB,CAsEpB;AACH,OAvED,EAxGa,CAiLb;AACA;AACA;;AACA,YAAMc,WAAW,GAAG,CAACC,cAAD,EAAgB7D,WAAhB,KAAgC;AACnD,YAAI,OAAO6D,cAAP,KAA0B,QAA9B,EAAuC;AACtCA,UAAAA,cAAc,CAACpC,MAAf,CAAsBC,OAAtB,CAA8B,CAACC,KAAD,EAAQnB,CAAR,KAAc;AAC3C,kBAAMsD,YAAY,GAAG9D,WAAW,CAACQ,CAAD,CAAhC;AACA,kBAAM;AAACC,cAAAA,CAAD;AAAIC,cAAAA;AAAJ,gBAASiB,KAAK,CAACoC,QAAN,CAAe,CAAf,CAAf,CAF2C,CAG3C;;AACAD,YAAAA,YAAY,CAACxF,KAAb,CAAmBK,QAAnB,GAA8B,OAA9B;AACAmF,YAAAA,YAAY,CAACxF,KAAb,CAAmB0F,GAAnB,GAA0B,GAAEtD,CAAE,IAA9B;AACAoD,YAAAA,YAAY,CAACxF,KAAb,CAAmB2F,IAAnB,GAA2B,GAAExD,CAAE,IAA/B;AACAqD,YAAAA,YAAY,CAACxF,KAAb,CAAmB4F,SAAnB,GAAgC,gCAA+BvC,KAAK,CAACwC,KAAM,0BAA3E;AACA,WARD;AASA,SAVD,MAWK;AACJT,UAAAA,OAAO,CAACC,GAAR,CAAY,gDAAZ;AACA;AACD,OAfD;;AAiBG,YAAMS,MAAM,GAAG,MAAM;AACrB;AACL;AACA;AACA;AACG;AACER,QAAAA,WAAW,CAACtE,SAAD,EAAWL,SAAX,CAAX;AACF2E,QAAAA,WAAW,CAACrE,WAAD,EAAaF,uBAAb,CAAX;;AAEA,YAAI,CAAC,KAAKhB,KAAL,CAAWgG,iBAAX,EAAL,EAAoC;AACnC;AACA;AACAT,UAAAA,WAAW,CAACpE,UAAD,EAAYJ,iBAAZ,CAAX;AACA,SAJD,MAKK;AACJ;AACA,cAAI,OAAOI,UAAP,KAAsB,QAA1B,EAAoCpC,MAAM,CAACkH,SAAP,CAAiBC,KAAjB,CAAuB/E,UAAvB,EAAmC,KAAnC;AACpC;;AACChC,QAAAA,MAAM,CAAC4G,MAAP,CAAc9G,MAAd;AACA6F,QAAAA,MAAM,CAACqB,qBAAP,CAA6BJ,MAA7B;AACF,OApBE;;AAqBHA,MAAAA,MAAM;AACN,KAtPiB;;AAAA,SAwQlBK,gBAxQkB,GAwQC,MAAM;AACrB,WAAKC,QAAL,CAAc;AACXjG,QAAAA,MAAM,EAAE0E,MAAM,CAACwB,WADJ;AAEXjG,QAAAA,KAAK,EAAEyE,MAAM,CAACyB;AAFH,OAAd;AAIA,KA7Qc;;AAGjB,SAAK3D,KAAL,GAAa;AACTxC,MAAAA,MAAM,EAAE0E,MAAM,CAACwB,WADN;AAETjG,MAAAA,KAAK,EAAEyE,MAAM,CAACyB;AAFL,KAAb;AAIGzB,IAAAA,MAAM,CAACJ,gBAAP,CAAwB,QAAxB,EAAkC,KAAK0B,gBAAvC;AACA,SAAKA,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBI,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAK7F,GAAL,GAAW,KAAKA,GAAL,CAAS6F,IAAT,CAAc,IAAd,CAAX;AACH;;AA6OCC,EAAAA,iBAAiB,GAAE;AACpB,SAAK9F,GAAL;AACA,SAAKyF,gBAAL;AACA;;AAEDM,EAAAA,kBAAkB,GAAE;AACnB,SAAKN,gBAAL;AACA;;AACDO,EAAAA,oBAAoB,GAAE;AACrB;AACA;AACAvH,IAAAA,MAAM,CAACwH,IAAP,CAAY1H,MAAZ;AACAG,IAAAA,KAAK,CAAC6G,KAAN,CAAYlH,KAAZ;AACMG,IAAAA,MAAM,CAAC+G,KAAP,CAAajH,MAAb,EALe,CAMf;AACN;;AASE4H,EAAAA,MAAM,GAAE;AACV,UAAMC,OAAO,GAAG,EAAhB;;AACA,SAAK,IAAI3E,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAG,KAAKnC,KAAL,CAAW+G,eAA7B,EAA8C5E,CAAC,EAA/C,EAAmD;AAC/C2E,MAAAA,OAAO,CAACE,IAAR,eAAa,oBAAC,KAAD;AAAO,QAAA,GAAG,EAAE7E,CAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAb;AACH;;AAEC,wBACD;AAAK,MAAA,EAAE,EAAC,aAAR;AAAsB,MAAA,KAAK,EAAE,KAAKlC,KAAL,CAAWC,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKF,KAAL,CAAWiH,QADb,EAEEH,OAFF,CADC;AAMF;;AAhSkC;;AAkSpC,eAAepH,KAAf;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React from \"react\"\r\nimport Dummy from './dummies'\r\nimport Matter from 'matter-js'\r\n\r\n/*\r\n\tset menu display state to false:\r\n\tthis.props.toggleRemoveNonMenuHtml()\r\n\r\n\tget current state:\r\n\tthis.props.state()\r\n*/\r\n\r\n\r\nlet world, engine, runner\r\n\r\nconst { Engine, Runner, World, Bodies, MouseConstraint, Composites, Body } = Matter\r\n\r\nclass Scene extends React.Component {\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t   return false\r\n\t}\r\n\t\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\t// TODO: eigentlich muss window state ein paar Stufen höher und ge-propt werden.\r\n\t\tthis.state = {\r\n\t    \theight: window.innerHeight,\r\n\t    \twidth: window.innerWidth\r\n\t    }\r\n\t    window.addEventListener(\"resize\", this.updateDimensions)\r\n\t    this.updateDimensions = this.updateDimensions.bind(this)\r\n\t    this.run = this.run.bind(this)\r\n\t}\r\n\r\n\tstyle = {\r\n\t    wrapper: {\r\n\t      display:    'block',\r\n\t      height:     '100vh',\r\n\t      width:      '100vw',\r\n\t      position:   'fixed',\r\n\t      background: 'rgba(25,25,25,0.88)',\r\n\t      zIndex: 2\r\n\t    },\r\n\t    blocks: {},\r\n\t    menulink: {\r\n\t    \t// TODO: hier kann man schön conditional logic als breakpoints fahren, abhängig von this.state.width /.height\r\n\t    }\r\n  \t}\r\n  \t\r\n  \trun = () => {\r\n\r\n  \t\t// define DomElement Lists\r\n\t\tconst fallables = document.querySelectorAll(\".fallable\")\r\n\t\tlet delayed_fallables = document.querySelectorAll(\".delayed-fallable\")\r\n\t\tconst super_delayed_fallables = document.querySelectorAll(\".super-delayed-fallable\")\r\n\r\n\t\t// declare names for matter stack objects, to be filled with Bodies based on DomElements Lists \r\n\t\tlet menulinks, colorblocks, htmlblocks = false\r\n\r\n\t\t// switch var for left / right side image drop:\r\n\t\t// let xPosSwitch = true\r\n\r\n\t\t// initialize Engine / World\r\n\t\tengine = Engine.create({positionIterations:10,velocityIterations:8})\r\n\t\tworld  = engine.world\r\n\t\trunner = Runner.create()\r\n\r\n\r\n\t\t// Start Runner & set timescale\r\n\t\tRunner.start(runner,engine)\r\n\t\tengine.timing.timeScale = 0.4\r\n\r\n\t\t// function to setup / size matter objects:\r\n\t\tconst sizeBoxes = (DomElements, randomPosition, AngularVelocity) => {\r\n\t\t\tconst matterStack = Composites.stack(\t\r\n\t\t  \t\t// xx, yy, columns, rows, columnGap, rowGap, cb\r\n\t\t  \t\t0, 0, DomElements.length, 1, 0, 0,\r\n\t\t  \t\t(xx, yy, i) => {\r\n\t\t  \t\t\tconst { x, y, width, height } = DomElements[i].getBoundingClientRect();\r\n\t\t  \t\t\tlet xPos, yPos\r\n\t\t  \t\t\tif (randomPosition) {\r\n\t\t  \t\t\t\txPos = Math.floor((Math.random() * (this.state.width-200)) + 1)\r\n\t\t  \t\t\t\tyPos = -this.state.height+200\r\n\t\t  \t\t\t} else {\r\n\t\t  \t\t\t\txPos = x; yPos = y\r\n\t\t  \t\t\t}\r\n\t\t    \t\tconst box = Bodies.rectangle(xPos, yPos, width, height, {isStatic:true})\r\n\t\t    \t\tconst randomAngularV = () => (Math.random()>0.5)? 1 : -1;\r\n\t\t    \t\tBody.setAngularVelocity( box, Math.PI/AngularVelocity*randomAngularV())\r\n\t\t    \t\treturn box\r\n\t\t    \t}\r\n\t    \t)\r\n\t    \treturn matterStack\r\n\t\t}\r\n\r\n\t\tconst dropStuff = matterStack => {\r\n\t\t\t// mach sie nur noch isStatic:false\r\n\t\t\tmatterStack.bodies.forEach((block) => {\r\n\t\t\t\tBody.setStatic(block, false)\t\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t\tmenulinks = sizeBoxes(fallables,true,500)\r\n\t\tWorld.add(world, [menulinks])\r\n\t\tdropStuff(menulinks)\r\n\r\n\t    const delayedSizingColorBlocks = () => {\r\n\t\t    colorblocks = sizeBoxes(super_delayed_fallables,true,50)\r\n\t\t\tWorld.add(world,[colorblocks])\r\n\t\t\tconst dropColor = () => dropStuff(colorblocks)\r\n\t\t\tsetTimeout(dropColor, 2500)\r\n\t    }\r\n\t    setTimeout(delayedSizingColorBlocks, 50)\r\n\r\n\r\n\r\n\t\t// console.log(\"Called in: menudrop.js; typeof menulinks (should be object):\"+typeof menulinks) \r\n\t    const wallThickness = 100\r\n\t\tconst wallHeight = this.state.height*2\r\n\t\tconst wallY = 0\r\n\t    const floor = Matter.Bodies.rectangle(this.state.width/2,this.state.height,this.state.width,100)\r\n\t    const wallR = Matter.Bodies.rectangle(this.state.width+50,wallY,wallThickness,wallHeight)\r\n\t    const wallL = Matter.Bodies.rectangle(-50,wallY,wallThickness,wallHeight)\r\n\t    const ceil  = Matter.Bodies.rectangle(this.state.width/2,-this.state.height-50,this.state.width,100)\r\n\t    Body.setStatic(floor, true)\r\n\t    Body.setStatic(wallR, true)\r\n\t    Body.setStatic(wallL, true)\r\n\t    Body.setStatic(ceil,  true)\r\n\r\n\t\tconst mouseConstraint = MouseConstraint.create(\r\n  \t\t\tengine, {element: document.querySelector(\"#mjs-wrapper\")}\r\n\t\t)\r\n\r\n\t\tWorld.add(world, [mouseConstraint, floor, wallL, wallR, ceil])\r\n\r\n\t\tconst addStuff = () => {\r\n\t\t\thtmlblocks = sizeBoxes(delayed_fallables,false,1000)\r\n\t\t\tdelayed_fallables.forEach(el => {\r\n\t\t\t\tel.style.background = 'rgb(250,250,250)'\r\n\t\t\t})\r\n\t\t\tWorld.add(world,[htmlblocks])\r\n\t\t\t// TODO: BUG: Dies wird auch ausgeführt, wenn Menü frühzeitig wieder geschlossen wird.\r\n\t\t\t// Denn: der setTimeout wird nicht gecancelt.\r\n\t\t\t// if (document.querySelector('.sctn_header') !== null) document.querySelector('.sctn_header').style.flexDirection = 'row-reverse'\r\n\t\t\tdropStuff(htmlblocks)\r\n\t\t}\r\n\t\tsetTimeout(addStuff, 2000)\r\n\r\n\t\t// mouse / touch position readouts:\r\n\t\tlet origMouseX, origMouseY\r\n\t\tlet mouseHasMoved = false\r\n\r\n\t\tfallables.forEach(el => {\r\n\t  \t\tel.addEventListener(\"mousedown\", e => {\r\n\t    \t\t// Es gibt schon den \"navigate to href\" Event Listener im Menulink Component\r\n\t    \t\t// man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\r\n\t    \t\t// get mouse position and navigate only when it hasn't changed much.\r\n\t    \t\t// DEBUG: console.log('mousedown')\r\n\t    \t\tconst recordOrigMousePos = () => {\r\n\t\t    \t\tconst event = window.event\r\n\t\t    \t\torigMouseX = event.pageX\r\n\t\t    \t\torigMouseY = event.pageY\r\n\t\t    \t\t// DEBUG: console.log(\"Called in: menudrop.js; mouseHasMoved, origMouseX, origMouseY: \"+mouseHasMoved, origMouseX, origMouseY)\r\n\t    \t\t}\r\n\t    \t\tif (mouseHasMoved) recordOrigMousePos()\r\n\t    \t})\r\n\r\n\t    \tel.addEventListener(\"touchstart\", e => {\r\n\t    \t\t// DEBUG: console.log('touchstart')\r\n\t    \t\tconst recordOrigMousePos = () => {\r\n\t\t    \t\tconst event = window.event\r\n\t\t    \t\t// DEBUG: console.dir(\"Called in: menudrop.js; (touch)event: \"+event) // get touch event\r\n\t\t    \t\torigMouseX = event.changedTouches[0].pageX\r\n\t\t    \t\torigMouseY = event.changedTouches[0].pageY\r\n\t\t    \t\t// DEBUG: console.log(\"Called in: menudrop.js; at touch start: mouseHasMoved: \"+mouseHasMoved+\"at: \"+origMouseX, origMouseY)\r\n\t    \t\t}\r\n\t    \t\t//if (mouseHasMoved) \r\n\t    \t\trecordOrigMousePos()\r\n\t    \t})\r\n\r\n\t    \tel.addEventListener(\"mousemove\", e => {\r\n\t    \t\t// DEBUG: console.log('mousemove')\r\n\t    \t\tmouseHasMoved = true\r\n\t    \t})\r\n\r\n\t    \tel.addEventListener(\"touchmove\", e => {\r\n\t    \t\t// DEBUG: console.log('touchmove')\r\n\t    \t\tmouseHasMoved = true\r\n\t    \t})\r\n\r\n\t    \tel.addEventListener(\"mouseup\", e => {\r\n\t    \t\t// DEBUG: console.log('mouseup')\r\n\t    \t\tconst event = window.event\r\n\t    \t\tconst newMouseX = event.pageX\r\n\t    \t\tconst newMouseY = event.pageY\r\n\t    \t\tif (!( (newMouseX > origMouseX+5) || (newMouseY > origMouseY+5) || (newMouseY < origMouseY-5) || (newMouseX < origMouseX-5) )) {\r\n\t    \t\t\t// DEBUG: alert(\"OPosX:\"+origMouseX+\" OPosX:\"+origMouseY+\" NPosX:\"+newMouseX+\" NPosX:\"+newMouseY)\r\n\t    \t\t\t// navigate to link target:\r\n\t    \t\t\t// hack: add class: \"clickable\" for navigation\r\n\t    \t\t\tel.classList.add(\"clickable\")\r\n\t    \t\t\t// DEBUG: alert(\"Called in: menudrop.js; @mouseup; props.removeNonMenuHtml: \"+this.props.removeNonMenuHtml)\r\n\t    \t\t\t// DEBUG: console.dir(\"Called in: menudrop.js; @mouseup: el.classList: \"+el.classList)\r\n\t    \t\t}\r\n\t    \t\tmouseHasMoved = false\r\n\t    \t})\r\n\r\n\t    \tel.addEventListener(\"touchend\", e => {\r\n\t    \t\t// DEBUG: console.log('touchend')\r\n\t    \t\tconst event = window.event\r\n\t    \t\tconst newMouseX = event.changedTouches[0].pageX\r\n\t\t    \tconst newMouseY = event.changedTouches[0].pageY\r\n\t\t    \tconsole.log('newMouseX: '+newMouseX+', newMouseY: '+newMouseY+', origMouseX: '+origMouseX+', origMouseY: '+origMouseY)\r\n\t    \t\tif (!( (newMouseX > origMouseX+5) || (newMouseY > origMouseY+5) || (newMouseY < origMouseY-5) || (newMouseX < origMouseX-5) )) {\r\n\t    \t\t\t// DEBUG: alert(\"OPosX:\"+origMouseX+\" OPosX:\"+origMouseY+\" NPosX:\"+newMouseX+\" NPosX:\"+newMouseY)\r\n\t    \t\t\t// navigate to link target:\r\n\t    \t\t\t// hack: add class: \"clickable\" for navigation\r\n\t    \t\t\tel.classList.add(\"clickable\")\r\n\t    \t\t\t// alert(this.props.removeNonMenuHtml)\r\n\t    \t\t\t// DEBUG: console.dir(\"Called in: menudrop.js; after touch: \"+el.classList)\r\n\t    \t\t}\r\n\t    \t\tmouseHasMoved = false\r\n\t    \t})\r\n\t    \t// TODO: garbage collect event listeners!\r\n\t\t}) \t\r\n\r\n\t\t// wird im update immer wieder ausgeführt:\r\n\t\t// takes matter stack & the corresponding DOM-Elements list as input\r\n\t\t// assigns new top,left and transform: rotation\r\n\t\tconst updateBoxes = (matterElements,DomElements) => {\r\n\t\t\tif (typeof matterElements === 'object'){\r\n\t\t\t\tmatterElements.bodies.forEach((block, i) => {\r\n\t\t\t\t\tconst thisFallable = DomElements[i]\r\n\t\t\t\t\tconst {x, y} = block.vertices[0]\r\n\t\t\t\t\t//console.log(\"Called in: menudrop.js; matterElement x,y:\"+x+\",\"+y)\r\n\t\t\t\t\tthisFallable.style.position = 'fixed'\r\n\t\t\t\t\tthisFallable.style.top = `${y}px`\r\n\t\t\t\t\tthisFallable.style.left = `${x}px`\r\n\t\t\t\t\tthisFallable.style.transform = `translate(-50%, -50%) rotate(${block.angle}rad) translate(50%, 50%)`\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t} \r\n\t\t\telse {\r\n\t\t\t\tconsole.log('Matter Composite Stack not (yet) instantiated.')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t    const update = () => {\r\n\t  \t\t/*\r\n\t\t\t    TODO: adjust size of object on update to adjust for changing text blocks:\r\n\t\t\t    const { width, height } = fallables[i].getBoundingClientRect();\r\n\t\t\t*/\r\n\t\t\t// DEBUG:console.dir(\"Called in: menudrop.js at top of update fn; prop removeNonMenuHtml: \"+this.props.removeNonMenuHtml)\r\n\t\t  \tupdateBoxes(menulinks,fallables)\r\n\t\t\tupdateBoxes(colorblocks,super_delayed_fallables)\r\n\t\t\t\r\n\t\t\tif (!this.props.removeNonMenuHtml()){\r\n\t\t\t\t// DEBUG: console.log(\"removeNonMenuHtml false\")\r\n\t\t\t\t// each render cycle: declare new delayed fallables:\t\t\t\t\r\n\t\t\t\tupdateBoxes(htmlblocks,delayed_fallables)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// DEBUG: console.log(\"removeNonMenuHtml true\")\r\n\t\t\t\tif (typeof htmlblocks === 'object') Matter.Composite.clear(htmlblocks, false)\r\n\t\t\t}\r\n  \t\t\tEngine.update(engine)\r\n  \t\t\twindow.requestAnimationFrame(update)\r\n\t\t}\r\n\t\tupdate()\r\n\t}\r\n  \tcomponentDidMount(){\r\n\t\tthis.run()\r\n\t\tthis.updateDimensions()\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tthis.updateDimensions()\r\n\t}\r\n\tcomponentWillUnmount(){\r\n\t\t// cancel matter\r\n\t\t// remove event listeners?\r\n\t\tRunner.stop(runner)\r\n\t\tWorld.clear(world)\r\n        Engine.clear(engine)\r\n        // set removeNonMenuHtml flag\r\n\t} \r\n\r\n\tupdateDimensions = () => {\r\n    \tthis.setState({\r\n\t      \theight: window.innerHeight,\r\n\t      \twidth: window.innerWidth\r\n    \t})\r\n   \t}\r\n   \t\r\n   \trender(){\r\n\t\tconst Dummies = []\r\n\t\tfor (let i=0; i < this.props.numberOfDummies; i++) {\r\n   \t\t\tDummies.push(<Dummy key={i} />)\r\n\t\t} \r\n\t  \t\r\n\t  \treturn (\r\n\t\t\t<div id=\"mjs-wrapper\" style={this.style.wrapper}>\r\n\t\t\t\t{this.props.elements}\r\n\t\t\t\t{Dummies}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default Scene\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n\r\n if(e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel'){\r\n        var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n        x = touch.pageX;\r\n        y = touch.pageY;\r\n    } else if (e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover'|| e.type=='mouseout' || e.type=='mouseenter' || e.type=='mouseleave') {\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n    }\r\n\r\n*/"]},"metadata":{},"sourceType":"module"}