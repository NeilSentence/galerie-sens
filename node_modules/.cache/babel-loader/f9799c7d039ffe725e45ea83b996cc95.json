{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nilss\\\\Desktop\\\\Projects\\\\galerie-sens\\\\src\\\\components\\\\menudrop.js\";\nimport React from \"react\";\nimport Matter from \"matter-js\";\nimport Dummy from './dummies';\n/*\r\n\tset menu display state to false:\r\n\tthis.props.toggle({menuDrop:false})\r\n\r\n\tget current state:\r\n\tthis.props.state()\r\n*/\n\nlet world, engine, runner;\nconst {\n  Engine,\n  Runner,\n  World,\n  Bodies,\n  MouseConstraint,\n  Composites,\n  Body\n} = Matter;\nconst fallables = document.querySelectorAll(\".fallable\");\nconst delayed_fallables = document.querySelectorAll(\".delayed-fallable\");\nconst super_delayed_fallables = document.querySelectorAll(\".super-delayed-fallable\"); // switch var for left / right side image drop:\n// let xPosSwitch = true\n\nengine = Engine.create({\n  positionIterations: 10,\n  velocityIterations: 8\n});\nworld = engine.world; // create runner\n\nrunner = Runner.create();\nRunner.start(runner, engine);\nlet windowheight = window.innerHeight;\nlet windowwidth = window.innerWidth;\nconst menulinks = Composites.stack( // xx, yy, columns, rows, columnGap, rowGap, cb\n0, 0, fallables.length, 1, 0, 0, (xx, yy, i) => {\n  const {\n    width,\n    height\n  } = fallables[i].getBoundingClientRect();\n  const xPos = Math.floor(Math.random() * (windowwidth - 200) + 1);\n  const yPos = -windowheight + 200;\n  const box = Bodies.rectangle(xPos, yPos, width, height, {//isStatic: i === 0 || i + 1 === fallables.length\n  });\n\n  const randomAngularV = () => Math.random() > 0.5 ? 1 : -1;\n\n  Body.setAngularVelocity(box, Math.PI / 500 * randomAngularV());\n  return box;\n});\nlet colorblocks = false;\n\nconst delayedSizing = () => {\n  colorblocks = Composites.stack(0, 0, super_delayed_fallables.length, 1, 0, 0, (xx, yy, i) => {\n    const {\n      width,\n      height\n    } = super_delayed_fallables[i].getBoundingClientRect();\n    const xPos = Math.floor(Math.random() * (windowwidth - 200) + 1);\n    const yPos = -windowheight + 200;\n    const box = Bodies.rectangle(xPos, yPos, width, height, {\n      isStatic: true\n    });\n\n    const randomAngularV = () => Math.random() > 0.5 ? 1 : -1;\n\n    Body.setAngularVelocity(box, Math.PI / 5 * randomAngularV());\n    return box;\n  });\n  World.add(world, [colorblocks]);\n  super_delayed_fallables.forEach(e => {\n    e.style.position = \"absolute\";\n  });\n\n  const dropColors = () => {\n    colorblocks.bodies.forEach(block => {\n      Body.setStatic(block, false); // mach sie nur noch isStatic:false\n    });\n  };\n\n  setTimeout(dropColors, 3200);\n};\n\nsetTimeout(delayedSizing, 50); // console.log(\"Called in: menudrop.js; typeof menulinks (should be object):\"+typeof menulinks) \n\nconst wallThickness = 100;\nconst wallHeight = windowheight * 2;\nconst wallY = 0;\nconst floor = Matter.Bodies.rectangle(windowwidth / 2, windowheight, windowwidth, 100);\nconst wallR = Matter.Bodies.rectangle(windowwidth + 50, wallY, wallThickness, wallHeight);\nconst wallL = Matter.Bodies.rectangle(-50, wallY, wallThickness, wallHeight);\nconst ceil = Matter.Bodies.rectangle(windowwidth / 2, -windowheight - 50, windowwidth, 100);\nBody.setStatic(floor, true);\nBody.setStatic(wallR, true);\nBody.setStatic(wallL, true);\nBody.setStatic(ceil, true);\nconst mouseConstraint = MouseConstraint.create(engine, {\n  element: document.querySelector(\"#mjs-wrapper\")\n});\nWorld.add(world, [menulinks, mouseConstraint, floor, wallL, wallR, ceil]);\nlet htmlblocks = false;\n\nconst addStuff = () => {\n  htmlblocks = Composites.stack(0, 0, delayed_fallables.length, 1, 0, 0, (xx, yy, i) => {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = delayed_fallables[i].getBoundingClientRect();\n    let xPos, yPos;\n    xPos = x;\n    yPos = y;\n    const box = Bodies.rectangle(xPos, yPos, width, height, {});\n\n    const randomAngularV = () => Math.random() > 0.5 ? 1 : -1;\n\n    Body.setAngularVelocity(box, Math.PI / 1000 * randomAngularV());\n    return box;\n  });\n  World.add(world, [htmlblocks]);\n  delayed_fallables.forEach(e => {\n    e.style.position = \"absolute\";\n  });\n};\n\nsetTimeout(addStuff, 2000); // mouse / touch position readouts:\n\nlet origMouseX, origMouseY;\nlet mouseHasMoved = false;\nfallables.forEach(el => {\n  el.style.position = \"absolute\";\n  el.addEventListener(\"mousedown\", e => {\n    // hier soll dann etwas passieren. Es gibt aber schon den \"navigate to href\" Event Listener im Menulink Component\n    // man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\n    // TODO: get mouse position and navigate only when it hasn't changed much.\n    const recordOrigMousePos = () => {\n      const event = window.event;\n      origMouseX = event.pageX;\n      origMouseY = event.pageY; // DEBUG: console.log(\"Called in: menudrop.js; mouseHasMoved, origMouseX, origMouseY: \"+mouseHasMoved, origMouseX, origMouseY)\n    };\n\n    if (mouseHasMoved) recordOrigMousePos();\n  });\n  el.addEventListener(\"touchstart\", e => {\n    // hier soll dann etwas passieren. Es gibt aber schon den \"navigate to href\" Event Listener im Menulink Component\n    // man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\n    // TODO: get mouse position and navigate only when it hasn't changed much.\n    const recordOrigMousePos = () => {\n      const event = window.event; // DEBUG: console.dir(\"Called in: menudrop.js; (touch)event: \"+event) // get touch event\n\n      origMouseX = event.changedTouches[0].pageX;\n      origMouseY = event.changedTouches[0].pageY; // DEBUG: \n\n      console.log(\"Called in: menudrop.js; at touch start: mouseHasMoved: \" + mouseHasMoved + \"at: \" + origMouseX, origMouseY);\n    };\n\n    if (mouseHasMoved) recordOrigMousePos();\n  });\n  el.addEventListener(\"mousemove\", e => {\n    mouseHasMoved = true;\n  });\n  el.addEventListener(\"touchmove\", e => {\n    e.preventDefault();\n    mouseHasMoved = true;\n  });\n  el.addEventListener(\"mouseup\", e => {\n    // hier soll dann etwas passieren. Es gibt aber schon den \"navigate to href\" Event Listener im Menulink Component\n    // man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\n    // TODO: get mouse position and navigate only when it hasn't changed much.\n    const event = window.event;\n    const newMouseX = event.pageX;\n    const newMouseY = event.pageY;\n\n    if (!(newMouseX > origMouseX + 5 || newMouseY > origMouseY + 5 || newMouseY < origMouseY - 5 || newMouseX < origMouseX - 5)) {\n      // DEBUG: alert(\"OPosX:\"+origMouseX+\" OPosX:\"+origMouseY+\" NPosX:\"+newMouseX+\" NPosX:\"+newMouseY)\n      // navigate to link target:\n      // hack: add class: \"navigatable\"\n      el.classList.add(\"clickable\"); // DEBUG: console.dir(\"Called in: menudrop.js; el.classList: \"+el.classList)\n    }\n\n    mouseHasMoved = false;\n  });\n  el.addEventListener(\"touchend\", e => {\n    // hier soll dann etwas passieren. Es gibt aber schon den \"navigate to href\" Event Listener im Menulink Component\n    // man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\n    // TODO: get mouse position and navigate only when it hasn't changed much.\n    e.preventDefault();\n    const event = window.event;\n    const newMouseX = event.changedTouches[0].pageX;\n    const newMouseY = event.changedTouches[0].pageY;\n\n    if (!(newMouseX > origMouseX + 5 || newMouseY > origMouseY + 5 || newMouseY < origMouseY - 5 || newMouseX < origMouseX - 5)) {\n      // DEBUG: alert(\"OPosX:\"+origMouseX+\" OPosX:\"+origMouseY+\" NPosX:\"+newMouseX+\" NPosX:\"+newMouseY)\n      // navigate to link target:\n      // hack: add class: \"navigatable\"\n      el.classList.add(\"clickable\"); // DEBUG: \n\n      console.dir(\"Called in: menudrop.js; after touch: \" + el.classList);\n    }\n\n    mouseHasMoved = false;\n  }); // TODO: garbage collect event listeners!\n});\n\nclass Scene extends React.Component {\n  constructor(props) {\n    super(props); // TODO: eigentlich muss window state ein paar Stufen höher und ge-propt werden.\n\n    this.style = {\n      wrapper: {\n        display: \"block\",\n        height: '100vh',\n        width: '100vw',\n        position: 'fixed',\n        background: 'rgba(255,255,255,0.88)'\n      },\n      blocks: {},\n      menulink: {// TODO: hier kann man schön conditional logic als breakpoints fahren, abhängig von this.state.width /.height\n      }\n    };\n\n    this.update = () => {\n      /*\r\n        TODO: adjust size of object on updaste to adjust for changing text blocks:\r\n        const { width, height } = fallables[i].getBoundingClientRect();\r\n      */\n      console.dir(\"Called in: menudrop.js; prop willNonMenuHtmlbeRemoved: \" + this.state.willNonMenuHtmlbeRemoved());\n      menulinks.bodies.forEach((block, i) => {\n        const thisFallable = fallables[i];\n        const {\n          x,\n          y\n        } = block.vertices[0];\n        console.log(x + \",\" + y);\n        thisFallable.style.top = `${y}px`;\n        thisFallable.style.left = `${x}px`;\n        thisFallable.style.transform = `translate(-50%, -50%) \n\t                             rotate(${block.angle}rad) \n\t                             translate(50%, 50%)`;\n      });\n\n      if (typeof colorblocks === 'object') {\n        colorblocks.bodies.forEach((block, i) => {\n          const thisFallable = super_delayed_fallables[i];\n          const {\n            x,\n            y\n          } = block.vertices[0];\n          thisFallable.style.top = `${y}px`;\n          thisFallable.style.left = `${x}px`;\n          thisFallable.style.transform = `translate(-50%, -50%) \n\t\t                             rotate(${block.angle}rad) \n\t\t                             translate(50%, 50%)`;\n        });\n      }\n\n      if (typeof htmlblocks === 'object') {\n        this.removeStuff(htmlblocks);\n        htmlblocks.bodies.forEach((block, i) => {\n          const thisFallable = delayed_fallables[i];\n          const {\n            x,\n            y\n          } = block.vertices[0]; //console.log(\"Called in: menudrop.js; htmlblocks x,y:\"+x+\",\"+y)\n\n          thisFallable.style.top = `${y}px`;\n          thisFallable.style.left = `${x}px`;\n          thisFallable.style.transform = `translate(-50%, -50%) \n\t\t                             rotate(${block.angle}rad) \n\t\t                             translate(50%, 50%)`;\n        });\n      }\n\n      Engine.update(engine);\n      requestAnimationFrame(this.update);\n    };\n\n    this.removeStuff = wovon => {\n      // this.props.toggle({menuDrop:false})\n      const removeHTMLfromWorld = this.state.willNonMenuHtmlbeRemoved;\n      if (removeHTMLfromWorld === true) Matter.Composite.clear(wovon, false);\n    };\n\n    this.updateDimensions = () => {\n      this.setState({\n        height: window.innerHeight,\n        width: window.innerWidth\n      });\n    };\n\n    this.state = {\n      height: window.innerHeight,\n      width: window.innerWidth,\n      willNonMenuHtmlbeRemoved: this.props.willNonMenuHtmlbeRemoved\n    };\n    window.addEventListener(\"resize\", this.updateDimensions);\n    this.updateDimensions = this.updateDimensions.bind(this);\n    this.update = this.update.bind(this);\n    this.removeStuff = this.removeStuff.bind(this);\n  }\n\n  componentDidMount() {\n    this.update();\n    this.updateDimensions();\n  }\n\n  componentWillUnmount() {\n    // cancel matter\n    World.clear(world);\n    Engine.clear(engine);\n    Runner.stop(runner);\n  }\n\n  render() {\n    const Dummies = [];\n\n    for (let i = 0; i < this.props.numberOfDummies; i++) {\n      Dummies.push( /*#__PURE__*/React.createElement(Dummy, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 20\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mjs-wrapper\",\n      style: this.style.wrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 4\n      }\n    }, this.props.elements, Dummies);\n  }\n\n}\n\nexport default Scene;\n/*\r\n\r\n if(e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel'){\r\n        var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n        x = touch.pageX;\r\n        y = touch.pageY;\r\n    } else if (e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover'|| e.type=='mouseout' || e.type=='mouseenter' || e.type=='mouseleave') {\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n    }\r\n\r\n*/","map":{"version":3,"sources":["C:/Users/nilss/Desktop/Projects/galerie-sens/src/components/menudrop.js"],"names":["React","Matter","Dummy","world","engine","runner","Engine","Runner","World","Bodies","MouseConstraint","Composites","Body","fallables","document","querySelectorAll","delayed_fallables","super_delayed_fallables","create","positionIterations","velocityIterations","start","windowheight","window","innerHeight","windowwidth","innerWidth","menulinks","stack","length","xx","yy","i","width","height","getBoundingClientRect","xPos","Math","floor","random","yPos","box","rectangle","randomAngularV","setAngularVelocity","PI","colorblocks","delayedSizing","isStatic","add","forEach","e","style","position","dropColors","bodies","block","setStatic","setTimeout","wallThickness","wallHeight","wallY","wallR","wallL","ceil","mouseConstraint","element","querySelector","htmlblocks","addStuff","x","y","origMouseX","origMouseY","mouseHasMoved","el","addEventListener","recordOrigMousePos","event","pageX","pageY","changedTouches","console","log","preventDefault","newMouseX","newMouseY","classList","dir","Scene","Component","constructor","props","wrapper","display","background","blocks","menulink","update","state","willNonMenuHtmlbeRemoved","thisFallable","vertices","top","left","transform","angle","removeStuff","requestAnimationFrame","wovon","removeHTMLfromWorld","Composite","clear","updateDimensions","setState","bind","componentDidMount","componentWillUnmount","stop","render","Dummies","numberOfDummies","push","elements"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport Matter from \"matter-js\"\r\nimport Dummy from './dummies'\r\n\r\n\r\n/*\r\n\tset menu display state to false:\r\n\tthis.props.toggle({menuDrop:false})\r\n\r\n\tget current state:\r\n\tthis.props.state()\r\n*/\r\n\r\n\r\nlet world, engine, runner\r\n\r\nconst { Engine, Runner, World, Bodies, MouseConstraint, Composites, Body } = Matter\r\n\r\nconst fallables = document.querySelectorAll(\".fallable\")\r\nconst delayed_fallables = document.querySelectorAll(\".delayed-fallable\")\r\nconst super_delayed_fallables = document.querySelectorAll(\".super-delayed-fallable\")\r\n\r\n// switch var for left / right side image drop:\r\n// let xPosSwitch = true\r\nengine = Engine.create({positionIterations:10,velocityIterations:8})\r\nworld = engine.world\r\n// create runner\r\n\r\nrunner = Runner.create();\r\nRunner.start(runner,engine);\r\n\r\nlet windowheight = window.innerHeight\r\nlet windowwidth = window.innerWidth\r\n\r\nconst menulinks = Composites.stack(\t\r\n\t\t// xx, yy, columns, rows, columnGap, rowGap, cb\r\n\t\t0, 0, fallables.length, 1, 0, 0,\r\n\t\t(xx, yy, i) => {\r\n\t\t\tconst { width, height } = fallables[i].getBoundingClientRect();\r\n\t\t\tconst xPos = Math.floor((Math.random() * (windowwidth-200)) + 1)\r\n\t\t\tconst yPos = -windowheight+200\t\t\r\n\t\tconst box = Bodies.rectangle(xPos, yPos, width, height, {\r\n  \t\t\t//isStatic: i === 0 || i + 1 === fallables.length\r\n\t\t})\r\n\t\tconst randomAngularV = () => (Math.random()>0.5)? 1 : -1;\r\n\t\tBody.setAngularVelocity( box, Math.PI/500*randomAngularV())\r\n\t\treturn box\r\n\t}\r\n)\r\n\r\nlet colorblocks = false\r\nconst delayedSizing = () => {\r\n    colorblocks = Composites.stack(\t\r\n\t  \t0, 0, super_delayed_fallables.length, 1, 0, 0,\r\n\t  \t\t(xx, yy, i) => {\r\n\t  \t\t\tconst { width, height } = super_delayed_fallables[i].getBoundingClientRect();\r\n\t  \t\t\tconst xPos = Math.floor((Math.random() * (windowwidth-200)) + 1)\r\n  \t\t\t\tconst yPos = -windowheight+200\t\r\n\t    \t\tconst box = Bodies.rectangle(xPos, yPos, width, height, {isStatic:true})\r\n\t    \t\tconst randomAngularV = () => (Math.random()>0.5)? 1 : -1;\r\n\t    \t\tBody.setAngularVelocity( box, Math.PI/5*randomAngularV());\r\n\t    \t\treturn box\r\n\t    \t}\r\n    )\r\n\tWorld.add(world,[colorblocks])\r\n\r\n\tsuper_delayed_fallables.forEach(e => {\r\n  \t\te.style.position = \"absolute\"\r\n\t})\r\n\r\n\tconst dropColors = () => {\r\n\r\n\t\tcolorblocks.bodies.forEach((block) => {\r\n\t\t\tBody.setStatic(block, false)\t\r\n\t\t\r\n\t\t// mach sie nur noch isStatic:false\r\n\t\t})\r\n\r\n\t}\r\n\tsetTimeout(dropColors, 3200)\r\n\r\n}\r\nsetTimeout(delayedSizing, 50)\r\n\r\n// console.log(\"Called in: menudrop.js; typeof menulinks (should be object):\"+typeof menulinks) \r\nconst wallThickness = 100\r\nconst wallHeight = windowheight*2\r\nconst wallY = 0\r\nconst floor = Matter.Bodies.rectangle(windowwidth/2,windowheight,windowwidth,100)\r\nconst wallR = Matter.Bodies.rectangle(windowwidth+50,wallY,wallThickness,wallHeight)\r\nconst wallL = Matter.Bodies.rectangle(-50,wallY,wallThickness,wallHeight)\r\nconst ceil  = Matter.Bodies.rectangle(windowwidth/2,-windowheight-50,windowwidth,100)\r\nBody.setStatic(floor, true)\r\nBody.setStatic(wallR, true)\r\nBody.setStatic(wallL, true)\r\nBody.setStatic(ceil,  true)\r\n\r\nconst mouseConstraint = MouseConstraint.create(\r\n\t\tengine, {element: document.querySelector(\"#mjs-wrapper\")}\r\n)\r\n\r\nWorld.add(world, [menulinks, mouseConstraint, floor, wallL, wallR, ceil])\r\n\r\nlet htmlblocks = false\r\n\r\nconst addStuff = () => {\r\n\r\n\thtmlblocks = Composites.stack(\t\r\n  \t\t0, 0, delayed_fallables.length, 1, 0, 0,\r\n  \t\t(xx, yy, i) => {\r\n  \t\t\tconst {x, y, width, height} = delayed_fallables[i].getBoundingClientRect();\r\n  \t\t\tlet xPos, yPos\r\n  \t\t\txPos = x; yPos = y\r\n    \t\tconst box = Bodies.rectangle(xPos, yPos, width, height, {})\r\n    \t\tconst randomAngularV = () => (Math.random()>0.5)? 1 : -1;\r\n    \t\tBody.setAngularVelocity( box, Math.PI/1000*randomAngularV());\r\n    \t\treturn box\r\n    \t}\r\n\t)\r\n\tWorld.add(world,[htmlblocks])\r\n\r\n\tdelayed_fallables.forEach(e => {\r\n\t\t\te.style.position = \"absolute\"\r\n\t})\r\n}\r\nsetTimeout(addStuff, 2000)\r\n\r\n\r\n// mouse / touch position readouts:\r\nlet origMouseX, origMouseY\r\nlet mouseHasMoved = false\r\n\r\nfallables.forEach(el => {\r\n\tel.style.position = \"absolute\";\r\n\t\tel.addEventListener(\"mousedown\", e => {\r\n\t\t// hier soll dann etwas passieren. Es gibt aber schon den \"navigate to href\" Event Listener im Menulink Component\r\n\t\t// man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\r\n\t\t// TODO: get mouse position and navigate only when it hasn't changed much.\r\n\t\tconst recordOrigMousePos = () => {\r\n    \t\tconst event = window.event\r\n    \t\torigMouseX = event.pageX\r\n    \t\torigMouseY = event.pageY\r\n    \t\t// DEBUG: console.log(\"Called in: menudrop.js; mouseHasMoved, origMouseX, origMouseY: \"+mouseHasMoved, origMouseX, origMouseY)\r\n\t\t}\r\n\t\tif (mouseHasMoved) recordOrigMousePos()\r\n\r\n\t})\r\n\tel.addEventListener(\"touchstart\", e => {\r\n\t\t// hier soll dann etwas passieren. Es gibt aber schon den \"navigate to href\" Event Listener im Menulink Component\r\n\t\t// man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\r\n\t\t// TODO: get mouse position and navigate only when it hasn't changed much.\r\n\t\tconst recordOrigMousePos = () => {\r\n    \t\tconst event = window.event\r\n    \t\t// DEBUG: console.dir(\"Called in: menudrop.js; (touch)event: \"+event) // get touch event\r\n    \t\torigMouseX = event.changedTouches[0].pageX\r\n    \t\torigMouseY = event.changedTouches[0].pageY\r\n    \t\t// DEBUG: \r\n    \t\tconsole.log(\"Called in: menudrop.js; at touch start: mouseHasMoved: \"+mouseHasMoved+\"at: \"+origMouseX, origMouseY)\r\n\t\t}\r\n\t\tif (mouseHasMoved) recordOrigMousePos()\r\n\r\n\t})\r\n\tel.addEventListener(\"mousemove\", e => {\r\n\t\tmouseHasMoved = true\r\n\t})\r\n\tel.addEventListener(\"touchmove\", e => {\r\n\t\te.preventDefault()\r\n\t\tmouseHasMoved = true\r\n\t})\r\n\tel.addEventListener(\"mouseup\", e => {\r\n\t\t// hier soll dann etwas passieren. Es gibt aber schon den \"navigate to href\" Event Listener im Menulink Component\r\n\t\t// man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\r\n\t\t// TODO: get mouse position and navigate only when it hasn't changed much.\r\n\t\tconst event = window.event\r\n\t\tconst newMouseX = event.pageX\r\n\t\tconst newMouseY = event.pageY\r\n\t\tif (!( (newMouseX > origMouseX+5) || (newMouseY > origMouseY+5) || (newMouseY < origMouseY-5) || (newMouseX < origMouseX-5) )) {\r\n\t\t\t// DEBUG: alert(\"OPosX:\"+origMouseX+\" OPosX:\"+origMouseY+\" NPosX:\"+newMouseX+\" NPosX:\"+newMouseY)\r\n\t\t\t// navigate to link target:\r\n\t\t\t// hack: add class: \"navigatable\"\r\n\t\t\tel.classList.add(\"clickable\")\r\n\t\t\t// DEBUG: console.dir(\"Called in: menudrop.js; el.classList: \"+el.classList)\r\n\t\t}\r\n\t\tmouseHasMoved = false\r\n\t})\r\n\tel.addEventListener(\"touchend\", e => {\r\n\t\t// hier soll dann etwas passieren. Es gibt aber schon den \"navigate to href\" Event Listener im Menulink Component\r\n\t\t// man könnte noch irgendeinen Effekt der bei allen fallables passiert hier anbringen.\r\n\t\t// TODO: get mouse position and navigate only when it hasn't changed much.\r\n\t\te.preventDefault()\r\n\t\tconst event = window.event\r\n\t\tconst newMouseX = event.changedTouches[0].pageX\r\n    \tconst newMouseY = event.changedTouches[0].pageY\r\n\t\tif (!( (newMouseX > origMouseX+5) || (newMouseY > origMouseY+5) || (newMouseY < origMouseY-5) || (newMouseX < origMouseX-5) )) {\r\n\t\t\t// DEBUG: alert(\"OPosX:\"+origMouseX+\" OPosX:\"+origMouseY+\" NPosX:\"+newMouseX+\" NPosX:\"+newMouseY)\r\n\t\t\t// navigate to link target:\r\n\t\t\t// hack: add class: \"navigatable\"\r\n\t\t\tel.classList.add(\"clickable\")\r\n\t\t\t// DEBUG: \r\n\t\t\tconsole.dir(\"Called in: menudrop.js; after touch: \"+el.classList)\r\n\t\t}\r\n\t\tmouseHasMoved = false\r\n\t})\r\n\t// TODO: garbage collect event listeners!\r\n})\r\n\r\n\r\n\r\nclass Scene extends React.Component {\r\n\t\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\t// TODO: eigentlich muss window state ein paar Stufen höher und ge-propt werden.\r\n\t\tthis.state = {\r\n\t      \theight: window.innerHeight,\r\n\t      \twidth: window.innerWidth,\r\n\t      \twillNonMenuHtmlbeRemoved: this.props.willNonMenuHtmlbeRemoved\r\n\t    }\r\n\t    window.addEventListener(\"resize\", this.updateDimensions)\r\n\t    this.updateDimensions = this.updateDimensions.bind(this)\r\n\t    this.update = this.update.bind(this)\r\n\t    this.removeStuff = this.removeStuff.bind(this)\r\n\t}\r\n\r\n\tstyle = {\r\n\t    wrapper: {\r\n\t      display: \"block\",\r\n\t      height:     '100vh',\r\n\t      width:      '100vw',\r\n\t      position:   'fixed',\r\n\t      background: 'rgba(255,255,255,0.88)'\r\n\t    },\r\n\t    blocks: {},\r\n\t    menulink: {\r\n\t    \t// TODO: hier kann man schön conditional logic als breakpoints fahren, abhängig von this.state.width /.height\r\n\t    }\r\n  \t}\r\n  \tupdate = () => {\r\n  \t\t/*\r\n\t\t    TODO: adjust size of object on updaste to adjust for changing text blocks:\r\n\t\t    const { width, height } = fallables[i].getBoundingClientRect();\r\n\t\t*/\r\n\t\tconsole.dir(\"Called in: menudrop.js; prop willNonMenuHtmlbeRemoved: \"+this.state.willNonMenuHtmlbeRemoved())\r\n\r\n\t  \tmenulinks.bodies.forEach((block, i) => {\r\n\t\t    const thisFallable = fallables[i]\r\n\t\t    const {x, y} = block.vertices[0]\r\n\t\t    console.log(x+\",\"+y)\r\n\t\t    thisFallable.style.top = `${y}px`\r\n\t\t    thisFallable.style.left = `${x}px`\r\n\t\t    thisFallable.style.transform = `translate(-50%, -50%) \r\n\t                             rotate(${block.angle}rad) \r\n\t                             translate(50%, 50%)`\r\n\t\t});\r\n\t\tif (typeof colorblocks === 'object')  {\r\n\t\t\t\r\n\t\t\tcolorblocks.bodies.forEach((block, i) => {\r\n\t\t\t    const thisFallable = super_delayed_fallables[i]\r\n\t\t\t    const {x, y} = block.vertices[0]\r\n\t\t\t    thisFallable.style.top = `${y}px`\r\n\t\t\t    thisFallable.style.left = `${x}px`\r\n\t\t\t    thisFallable.style.transform = `translate(-50%, -50%) \r\n\t\t                             rotate(${block.angle}rad) \r\n\t\t                             translate(50%, 50%)`\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (typeof htmlblocks === 'object') {\r\n\t\t\tthis.removeStuff(htmlblocks)\r\n\t\t\t\r\n\t\t\thtmlblocks.bodies.forEach((block, i) => {\r\n\t\t\t    const thisFallable = delayed_fallables[i]\r\n\t\t\t    const {x, y} = block.vertices[0]\r\n\t\t\t    //console.log(\"Called in: menudrop.js; htmlblocks x,y:\"+x+\",\"+y)\r\n\t\t\t    thisFallable.style.top = `${y}px`\r\n\t\t\t    thisFallable.style.left = `${x}px`\r\n\t\t\t    thisFallable.style.transform = `translate(-50%, -50%) \r\n\t\t                             rotate(${block.angle}rad) \r\n\t\t                             translate(50%, 50%)`\r\n\t\t\t});\r\n\t\t}\r\n\t\t\tEngine.update(engine)\r\n\t\t\trequestAnimationFrame(this.update)\r\n\t}\r\n\t\r\n\tremoveStuff = wovon => {\r\n\t\t// this.props.toggle({menuDrop:false})\r\n\t\tconst removeHTMLfromWorld = this.state.willNonMenuHtmlbeRemoved\r\n\t\tif (removeHTMLfromWorld === true) Matter.Composite.clear(wovon, false)\r\n\t}\r\n\r\n  \tcomponentDidMount(){\r\n\t\tthis.update()\r\n\t\tthis.updateDimensions()\r\n\t}\r\n\r\n\r\n\tcomponentWillUnmount(){\r\n\t\t// cancel matter\r\n\t\tWorld.clear(world);\r\n        Engine.clear(engine);\r\n        Runner.stop(runner);\r\n\t} \r\n\r\n\tupdateDimensions = () => {\r\n    \tthis.setState({\r\n\t      \theight: window.innerHeight,\r\n\t      \twidth: window.innerWidth\r\n    \t})\r\n   \t}\r\n   \t\r\n   \trender(){\r\n\t\tconst Dummies = []\r\n\t\tfor (let i=0; i < this.props.numberOfDummies; i++) {\r\n   \t\t\tDummies.push(<Dummy/>);\r\n\t\t} \r\n\t  \t\r\n\t  \treturn (\r\n\t\t\t<div id=\"mjs-wrapper\" style={this.style.wrapper}>\r\n\t\t\t\t{this.props.elements}\r\n\t\t\t\t{Dummies}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default Scene\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n\r\n if(e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel'){\r\n        var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n        x = touch.pageX;\r\n        y = touch.pageY;\r\n    } else if (e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover'|| e.type=='mouseout' || e.type=='mouseenter' || e.type=='mouseleave') {\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n    }\r\n\r\n*/"]},"metadata":{},"sourceType":"module"}